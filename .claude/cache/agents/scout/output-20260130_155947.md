# Codebase Report: ìì‹ì•ˆê±´ ë° ì§„í–‰ ìƒíƒœ ì²˜ë¦¬ êµ¬ì¡°
Generated: 2026-01-30

## Summary
MAX Meeting v1.2.0ì˜ ìì‹ì•ˆê±´(children) ê³„ì¸µ êµ¬ì¡° ì²˜ë¦¬ ë° ì§„í–‰ ìƒíƒœ í‘œì‹œ ë¡œì§ì„ ë¶„ì„í–ˆìŠµë‹ˆë‹¤. LLM íŒŒì‹±ë¶€í„° í”„ë¡ íŠ¸ì—”ë“œ UIê¹Œì§€ ì „ì²´ íë¦„ì„ ì¶”ì í–ˆìŠµë‹ˆë‹¤.

---

## 1. ìì‹ì•ˆê±´ ìƒì„± (Backend LLM Service)

### Location
**File:** `/home/et/max-ops/max-meeting/backend/app/services/llm.py`  
**Function:** `parse_agenda_text()` (lines 300-509)

### í•µì‹¬ êµ¬ì¡°
```python
async def parse_agenda_text(
    self,
    raw_text: str,
    meeting_title: str | None = None,
) -> list[dict[str, Any]]:
```

### ë°˜í™˜ í˜•ì‹ (ê³„ì¸µí˜•)
```json
[
  {
    "title": "ëŒ€ì•ˆê±´ ì œëª©",
    "description": "ì„¤ëª… (nullable)",
    "children": [
      {
        "title": "ìì‹ì•ˆê±´ ì œëª©",
        "description": null,
        "children": []  // 3ë‹¨ê³„ ì´ìƒ ì¤‘ì²© ê°€ëŠ¥
      }
    ]
  }
]
```

### LLM í”„ë¡¬í”„íŠ¸ ì „ëµ
**ê³„ì¸µ ë§ˆì»¤ ì¸ì‹:**
- Level 1: `"1."`, `"I."`, `"ê°€."`, `"ì œ1ì¡°"`, `"â‘ "`, `"(1)"`
- Level 2: `"  -"`, `"  a)"`, `"  1)"`, `"> "`, `"  ã„´"` (í•œêµ­ì–´)
- Level 3+: ë” ê¹Šì€ ë“¤ì—¬ì“°ê¸°, `"    ã„´"`, í•˜ìœ„ ë²ˆí˜¸

**ê²€ì¦ ë° ì •ê·œí™”:**
```python
def normalize_item(item: dict, depth: int = 0) -> dict | None:
    if depth > 10:  # ë¬´í•œ ì¬ê·€ ë°©ì§€
        return None
    
    children = []
    if "children" in item and isinstance(item["children"], list):
        for child in item["children"]:
            normalized_child = normalize_item(child, depth + 1)
            if normalized_child:
                children.append(normalized_child)
    
    return {
        "title": str(item["title"]).strip()[:200],
        "description": str(item.get("description") or "").strip()[:5000] or None,
        "children": children,
    }
```

**íŠ¹ì§•:**
- ìµœëŒ€ 20ê°œ ëŒ€ì•ˆê±´ (top-level)
- ìì‹ì•ˆê±´ì€ ë¬´ì œí•œ (depth 10ê¹Œì§€)
- í•œêµ­ì–´ ë²•ë¥  í˜•ì‹ ì§€ì› (`ì œ1ì¡°`, `1í•­`, `ã„´`)
- êµ¬ì¡°í™”ë˜ì§€ ì•Šì€ ì…ë ¥ì— ëŒ€í•œ ìë™ ê·¸ë£¹í•‘

---

## 2. í”„ë¡ íŠ¸ì—”ë“œ ì•ˆê±´ ì „ì†¡ ë¡œì§

### Location
**File:** `/home/et/max-ops/max-meeting/frontend/src/routes/meetings/new/+page.svelte`  
**Lines:** 197-236, 358-365

### API í˜¸ì¶œ (íŒŒì‹±)
```typescript
// Line 197-199
const response = await api.post<{ items: ParsedItem[] }>(
    '/agendas/parse-preview',
    { text: agendaTextInput }
);
```

### ì¬ê·€ ë³€í™˜ í•¨ìˆ˜
```typescript
// Lines 203-211
function convertItem(item: ParsedItem): AgendaInput {
    return {
        id: crypto.randomUUID(),
        title: item.title,
        description: item.description || '',
        questions: [],
        children: (item.children || []).map(convertItem)  // ì¬ê·€
    };
}
```

### íšŒì˜ ìƒì„± ì‹œ ì•ˆê±´ ì €ì¥
```typescript
// Lines 358-365
// âš ï¸ ë¬¸ì œ ë°œê²¬: childrenì´ ì €ì¥ë˜ì§€ ì•ŠìŒ!
for (let i = 0; i < validAgendas.length; i++) {
    await api.post(`/meetings/${meetingId}/agendas`, {
        title: validAgendas[i].title.trim(),
        description: validAgendas[i].description.trim() || null,
        order_num: i + 1
        // children í•„ë“œê°€ ì—†ìŒ! âŒ
    });
}
```

**â— ë²„ê·¸ ë°œê²¬:**
- í˜„ì¬ ì½”ë“œëŠ” **ëŒ€ì•ˆê±´ë§Œ ì €ì¥**í•˜ê³  **ìì‹ì•ˆê±´ì„ ë¬´ì‹œ**í•¨
- `children` ë°°ì—´ì´ APIì— ì „ì†¡ë˜ì§€ ì•ŠìŒ
- ì¬ê·€ì ìœ¼ë¡œ ìì‹ì•ˆê±´ì„ ì €ì¥í•˜ëŠ” ë¡œì§ í•„ìš”

---

## 3. íšŒì˜ ìƒì„¸ í˜ì´ì§€ (ìì‹ì•ˆê±´ í‘œì‹œ)

### Location
**File:** `/home/et/max-ops/max-meeting/frontend/src/routes/meetings/[id]/+page.svelte`  
**Lines:** 19-39, 378-511

### ìƒíƒœ ê´€ë¦¬
```typescript
// Line 20-21
let expandedAgendas = $state(new Set<number>());
let expandedChildren = $state(new Set<number>());

// Lines 23-39
function toggleAgenda(id: number) {
    if (expandedAgendas.has(id)) {
        expandedAgendas.delete(id);
    } else {
        expandedAgendas.add(id);
    }
    expandedAgendas = new Set(expandedAgendas);
}

function toggleChild(id: number) {
    // ìì‹ì•ˆê±´ í† ê¸€
}
```

### UI êµ¬ì¡° (3ë‹¨ê³„)
```svelte
<!-- Lines 379-508 -->
{#each $currentMeeting.agendas as agenda, index}
    <!-- 1ï¸âƒ£ ëŒ€ì•ˆê±´ í—¤ë” (í´ë¦­ ê°€ëŠ¥) -->
    <button onclick={() => toggleAgenda(agenda.id)}>
        <span>í™”ì‚´í‘œ ì•„ì´ì½˜</span>
        <span class="ë²ˆí˜¸">{index + 1}</span>
        <h3>{agenda.title}</h3>
        {#if agenda.children && agenda.children.length > 0}
            <span>({agenda.children.length}ê°œ í•˜ìœ„ ì•ˆê±´)</span>
        {/if}
    </button>
    
    <!-- 2ï¸âƒ£ ëŒ€ì•ˆê±´ í¼ì¹¨ ì˜ì—­ -->
    {#if expandedAgendas.has(agenda.id)}
        {#if agenda.children && agenda.children.length > 0}
            <!-- ìì‹ì•ˆê±´ ë¦¬ìŠ¤íŠ¸ -->
            {#each agenda.children as child, childIndex}
                <!-- 3ï¸âƒ£ ìì‹ì•ˆê±´ í—¤ë” -->
                <button onclick={() => toggleChild(child.id)}>
                    <span>{index + 1}.{childIndex + 1}</span>
                    <span>{child.title}</span>
                </button>
                
                <!-- 4ï¸âƒ£ ìì‹ì•ˆê±´ ë‚´ìš© (ì§ˆë¬¸ í¬í•¨) -->
                {#if expandedChildren.has(child.id)}
                    <div>
                        {#if child.description}
                            <p>{child.description}</p>
                        {/if}
                        {#if child.questions}
                            <!-- ì§ˆë¬¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
                        {/if}
                    </div>
                {/if}
            {/each}
        {:else}
            <!-- ìì‹ì•ˆê±´ ì—†ìœ¼ë©´ ëŒ€ì•ˆê±´ ìƒì„¸ í‘œì‹œ -->
        {/if}
    {/if}
{/each}
```

**íŠ¹ì§•:**
- ì¤‘ì²©ëœ í† ê¸€ ìƒíƒœ (ëŒ€ì•ˆê±´ + ìì‹ì•ˆê±´)
- ë²ˆí˜¸ í˜•ì‹: `1`, `1.1`, `1.2` ë“±
- ì§ˆë¬¸ì€ ìì‹ì•ˆê±´ë³„ë¡œ í‘œì‹œ ê°€ëŠ¥

---

## 4. ë…¹ìŒ í˜ì´ì§€ (ìì‹ì•ˆê±´ ì§„í–‰ ìƒíƒœ)

### Location
**File:** `/home/et/max-ops/max-meeting/frontend/src/routes/meetings/[id]/record/+page.svelte`  
**Lines:** 289-364

### íƒ€ì„ìŠ¤íƒ¬í”„ ê´€ë¦¬

#### ìì‹ì•ˆê±´ ë³€ê²½ í•¸ë“¤ëŸ¬
```typescript
// Lines 289-299
async function handleChildAgendaChange(
    prevId: number | null, 
    childId: number, 
    currentTime: number
) {
    // Close previous segment (ëŒ€ì•ˆê±´ ë˜ëŠ” ìì‹ì•ˆê±´)
    if (prevId !== null && prevId !== childId) {
        await closeSegment(prevId, currentTime);
    }
    
    // Open new segment for child
    await openSegment(childId, currentTime);
    activeAgendaId = childId;
}
```

#### ì•ˆê±´ ì°¾ê¸° (ëŒ€ì•ˆê±´ + ìì‹ì•ˆê±´)
```typescript
// Lines 301-318
function findAgendaById(agendaId: number): Agenda | null {
    if (!meeting) return null;
    
    // ëŒ€ì•ˆê±´ì—ì„œ ì°¾ê¸°
    const parent = meeting.agendas.find(a => a.id === agendaId);
    if (parent) return parent;
    
    // ìì‹ì•ˆê±´ì—ì„œ ì°¾ê¸°
    for (const agenda of meeting.agendas) {
        if (agenda.children) {
            const child = agenda.children.find(c => c.id === agendaId);
            if (child) return child;
        }
    }
    
    return null;
}
```

#### ì„¸ê·¸ë¨¼íŠ¸ ë‹«ê¸°/ì—´ê¸°
```typescript
// Lines 320-339
async function closeSegment(agendaId: number, endTime: number) {
    const agenda = findAgendaById(agendaId);  // ëŒ€ì•ˆê±´ ë˜ëŠ” ìì‹ì•ˆê±´
    if (!agenda) return;
    
    const segments = [...(agenda.time_segments || [])];
    const lastSeg = segments[segments.length - 1];
    
    if (lastSeg && lastSeg.end === null) {
        lastSeg.end = endTime;
        
        await api.patch(`/agendas/${agendaId}`, { time_segments: segments });
        updateLocalAgenda(agendaId, { time_segments: segments });
    }
}

// Lines 341-364
async function openSegment(agendaId: number, startTime: number) {
    const agenda = findAgendaById(agendaId);
    if (!agenda) return;
    
    const segments = [...(agenda.time_segments || [])];
    segments.push({ start: startTime, end: null });
    
    await api.patch(`/agendas/${agendaId}`, {
        time_segments: segments,
        started_at_seconds: segments[0].start,
        status: 'in_progress'
    });
}
```

#### ë¡œì»¬ ìƒíƒœ ì—…ë°ì´íŠ¸
```typescript
// Lines 366-388
function updateLocalAgenda(agendaId: number, updates: Partial<Agenda>) {
    if (meeting) {
        meeting = {
            ...meeting,
            agendas: meeting.agendas.map((a) => {
                // ëŒ€ì•ˆê±´ ì—…ë°ì´íŠ¸
                if (a.id === agendaId) {
                    return { ...a, ...updates };
                }
                // ìì‹ì•ˆê±´ ì—…ë°ì´íŠ¸
                if (a.children) {
                    return {
                        ...a,
                        children: a.children.map((c) =>
                            c.id === agendaId ? { ...c, ...updates } : c
                        )
                    };
                }
                return a;
            })
        };
    }
}
```

**íŠ¹ì§•:**
- ìì‹ì•ˆê±´ë„ ë…ë¦½ì ì¸ íƒ€ì„ìŠ¤íƒ¬í”„ ê°€ì§
- `time_segments: [{ start: number, end: number | null }]`
- ëŒ€ì•ˆê±´ê³¼ ìì‹ì•ˆê±´ ëª¨ë‘ `status: 'in_progress'` ê°€ëŠ¥

---

## 5. ê²°ê³¼ í˜ì´ì§€ (ì§„í–‰ ê²Œì´ì§€ ë° íƒ­)

### Location
**File:** `/home/et/max-ops/max-meeting/frontend/src/routes/meetings/[id]/results/+page.svelte`  
**Lines:** 36-72, 124-128, 525-560

### ë…¹ìŒ ìƒíƒœ ì¶”ì 
```typescript
// Lines 36-61
interface Recording {
    id: number;
    meeting_id: number;
    status: 'pending' | 'uploaded' | 'processing' | 'completed' | 'failed';
    // ...
}

let recordings = $state<Recording[]>([]);

let processingStatus = $derived.by(() => {
    if (recordingsLoading) return 'loading';
    if (recordings.length === 0) return 'no_recordings';
    
    const hasProcessing = recordings.some(r => r.status === 'processing');
    const hasUploaded = recordings.some(r => r.status === 'uploaded');
    const hasCompleted = recordings.some(r => r.status === 'completed');
    const hasFailed = recordings.some(r => r.status === 'failed');
    
    if (hasProcessing) return 'processing';
    if (hasUploaded) return 'uploaded';
    if (hasFailed && !hasCompleted) return 'failed';
    if (hasCompleted) return 'ready';
    return 'unknown';
});
```

### ìƒíƒœë³„ ë©”ì‹œì§€
```typescript
// Lines 64-72
const statusMessages = {
    loading: { title: 'ìƒíƒœ í™•ì¸ ì¤‘...', color: 'gray' },
    no_recordings: { 
        title: 'ë…¹ìŒì´ ì—†ìŠµë‹ˆë‹¤', 
        description: 'ì•ˆê±´ê³¼ ë©”ëª¨ë§Œìœ¼ë¡œ íšŒì˜ë¡ì„ ìƒì„±í•˜ê±°ë‚˜, ë…¹ìŒì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        color: 'gray' 
    },
    uploaded: { 
        title: 'ë…¹ìŒ ì—…ë¡œë“œ ì™„ë£Œ', 
        description: 'ìŒì„±ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜í•˜ë ¤ë©´ ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.',
        color: 'blue' 
    },
    processing: { 
        title: 'ìŒì„±ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜ ì¤‘...', 
        description: 'ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”. ì™„ë£Œë˜ë©´ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.',
        color: 'yellow' 
    },
    ready: { 
        title: 'ë³€í™˜ ì™„ë£Œ!', 
        description: 'íšŒì˜ë¡ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        color: 'green' 
    },
    failed: { title: 'ë³€í™˜ ì‹¤íŒ¨', color: 'red' },
    unknown: { title: 'ìƒíƒœ í™•ì¸ í•„ìš”', color: 'gray' }
};
```

### íƒ­ êµ¬ì„±
```typescript
// Lines 124-128
const tabConfig = $derived([
    { id: 'summary', label: 'ìš”ì•½', icon: FileText },
    { 
        id: 'actions', 
        label: 'ì‹¤í–‰ í•­ëª©', 
        icon: ListTodo, 
        badge: $resultsStore.actionItems.length || undefined 
    },
    { id: 'transcript', label: 'ëŒ€í™” ë‚´ìš©', icon: FileAudio }
]);
```

### ì•ˆê±´ë³„ í† ë¡  íƒ­
```svelte
<!-- Lines 525-560 -->
{#if activeTab === 'discussions'}
    <div class="space-y-4">
        {#each $resultsStore.agendaDiscussions as discussion}
            <Card>
                <div class="discussion-item">
                    <div class="discussion-header">
                        <span class="discussion-order">{discussion.agenda_order}</span>
                        <h3 class="discussion-title">{discussion.agenda_title}</h3>
                    </div>
                    <div class="discussion-content">
                        <p>{discussion.summary}</p>
                        {#if discussion.key_points}
                            <ul class="key-points">
                                {#each discussion.key_points as point}
                                    <li>{point}</li>
                                {/each}
                            </ul>
                        {/if}
                    </div>
                </div>
            </Card>
        {/each}
    </div>
{/if}
```

### ìƒíƒœ í´ë§ (ìë™ ì—…ë°ì´íŠ¸)
```typescript
// Lines 245-263
if (processingStatus === 'processing' || processingStatus === 'uploaded') {
    statusPollInterval = setInterval(async () => {
        await loadRecordingsStatus();
        
        const allCompleted = recordings.length > 0 
            && recordings.every(r => r.status === 'completed');
        
        if (allCompleted) {
            await resultsStore.loadTranscript(meetingId);
            toast.success('ë³€í™˜ ì™„ë£Œ! íšŒì˜ë¡ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            
            if (statusPollInterval) {
                clearInterval(statusPollInterval);
                statusPollInterval = null;
            }
            
            // Auto-generate meeting result if not exists
            if (!$hasResult) {
                await handleGenerate();
            }
        }
    }, 3000); // 3ì´ˆë§ˆë‹¤ í´ë§
}
```

---

## 6. í† ë¡  ë§¤ì¹­ ë¡œì§ (Backend)

### Location
**File:** `/home/et/max-ops/max-meeting/backend/app/services/result.py`

### êµ¬ì¡°
- `ResultService` í´ë˜ìŠ¤
- `MeetingResult`, `ActionItem`, `MeetingDecision` ëª¨ë¸ ê´€ë¦¬

### ì£¼ìš” ë©”ì„œë“œ
| ë©”ì„œë“œ | ì—­í•  |
|--------|------|
| `get_meeting_or_raise(meeting_id)` | íšŒì˜ ì¡°íšŒ (exception ì²˜ë¦¬) |
| `create_result(meeting_id, data)` | ìƒˆ ê²°ê³¼ ë²„ì „ ìƒì„± |
| `get_latest_result(meeting_id)` | ìµœì‹  ê²°ê³¼ ì¡°íšŒ |
| `list_action_items(meeting_id)` | ì‹¤í–‰ í•­ëª© ëª©ë¡ |
| `list_decisions(meeting_id)` | ê²°ì • ì‚¬í•­ ëª©ë¡ |

**â“ í† ë¡  ë§¤ì¹­ êµ¬ì²´ ë¡œì§:**
- `result.py`ëŠ” CRUDë§Œ ë‹´ë‹¹
- ì‹¤ì œ í† ë¡  ë‚´ìš©ê³¼ ì•ˆê±´ ë§¤ì¹­ì€ **LLM ì„œë¹„ìŠ¤**ì—ì„œ ì²˜ë¦¬
- `discussions` í•„ë“œëŠ” `MeetingResult` ëª¨ë¸ ë‚´ JSON ì»¬ëŸ¼ìœ¼ë¡œ ì €ì¥

---

## ë°œê²¬ëœ ë¬¸ì œì 

### ğŸ”´ Critical: ìì‹ì•ˆê±´ ì €ì¥ ëˆ„ë½
**Location:** `frontend/src/routes/meetings/new/+page.svelte:358-365`

**ë¬¸ì œ:**
```typescript
for (let i = 0; i < validAgendas.length; i++) {
    await api.post(`/meetings/${meetingId}/agendas`, {
        title: validAgendas[i].title.trim(),
        description: validAgendas[i].description.trim() || null,
        order_num: i + 1
        // âŒ children í•„ë“œ ëˆ„ë½!
    });
}
```

**ì˜í–¥:**
- LLMì´ ê³„ì¸µ êµ¬ì¡°ë¥¼ íŒŒì‹±í•´ë„ **ìì‹ì•ˆê±´ì´ DBì— ì €ì¥ë˜ì§€ ì•ŠìŒ**
- ì‚¬ìš©ìê°€ ì…ë ¥í•œ í•˜ìœ„ ì•ˆê±´ì´ ëª¨ë‘ ì‚¬ë¼ì§
- íšŒì˜ ìƒì„¸ í˜ì´ì§€ì—ì„œ ìì‹ì•ˆê±´ í‘œì‹œ ë¶ˆê°€

**í•´ê²° ë°©ì•ˆ:**
1. **ì¬ê·€ì  ì €ì¥ í•¨ìˆ˜ ì¶”ê°€:**
```typescript
async function saveAgendaRecursive(
    meetingId: number, 
    agenda: AgendaInput, 
    orderNum: number, 
    parentId: number | null = null
) {
    const response = await api.post(`/meetings/${meetingId}/agendas`, {
        title: agenda.title.trim(),
        description: agenda.description.trim() || null,
        order_num: orderNum,
        parent_id: parentId
    });
    
    const agendaId = response.id;
    
    // ìì‹ì•ˆê±´ ì¬ê·€ ì €ì¥
    if (agenda.children && agenda.children.length > 0) {
        for (let i = 0; i < agenda.children.length; i++) {
            await saveAgendaRecursive(
                meetingId, 
                agenda.children[i], 
                i + 1, 
                agendaId  // parent_id
            );
        }
    }
}
```

2. **API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸:**
- Backendê°€ `parent_id` í•„ë“œë¥¼ ì§€ì›í•˜ëŠ”ì§€ í™•ì¸
- `Agenda` ëª¨ë¸ì— `parent_id` ì™¸ë˜í‚¤ ì¡´ì¬ ì—¬ë¶€ í™•ì¸

---

## ë°ì´í„° íë¦„ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£ ì‚¬ìš©ì ì…ë ¥ (í…ìŠ¤íŠ¸)                                       â”‚
â”‚     - "1. ì˜ˆì‚°ì•ˆ ì‹¬ì˜\n  - 2024ë…„ ì˜ˆì‚°\n2. ì¸ì‚¬ ë°œí‘œ"           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ï¸âƒ£ LLM íŒŒì‹± (backend/app/services/llm.py:300)              â”‚
â”‚     parse_agenda_text()                                      â”‚
â”‚     - ê³„ì¸µ ë§ˆì»¤ ì¸ì‹ ("1.", "  -", "> ", "ã„´")              â”‚
â”‚     - JSON êµ¬ì¡° ìƒì„± { title, description, children }        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œ ë³€í™˜ (frontend/.../new/+page.svelte:203)      â”‚
â”‚     convertItem() - ì¬ê·€ ë³€í™˜                                 â”‚
â”‚     - ParsedItem â†’ AgendaInput                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4ï¸âƒ£ íšŒì˜ ìƒì„± API í˜¸ì¶œ                                        â”‚
â”‚     POST /meetings/{id}/agendas                              â”‚
â”‚     âŒ ë¬¸ì œ: children í•„ë“œ ëˆ„ë½ (ëŒ€ì•ˆê±´ë§Œ ì €ì¥)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5ï¸âƒ£ íšŒì˜ ìƒì„¸ í˜ì´ì§€ (frontend/.../[id]/+page.svelte:378)    â”‚
â”‚     - agenda.children ë°°ì—´ ìˆœíšŒ                               â”‚
â”‚     - ì¤‘ì²© í† ê¸€ UI (expandedAgendas, expandedChildren)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6ï¸âƒ£ ë…¹ìŒ í˜ì´ì§€ (frontend/.../record/+page.svelte:289)       â”‚
â”‚     - findAgendaById(): ëŒ€ì•ˆê±´ + ìì‹ì•ˆê±´ ëª¨ë‘ ê²€ìƒ‰            â”‚
â”‚     - handleChildAgendaChange(): ìì‹ì•ˆê±´ íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë¡      â”‚
â”‚     - time_segments: [{ start, end }]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  7ï¸âƒ£ ê²°ê³¼ í˜ì´ì§€ (frontend/.../results/+page.svelte:525)      â”‚
â”‚     - agendaDiscussions ë°°ì—´                                  â”‚
â”‚     - ì•ˆê±´ë³„ í† ë¡  ë‚´ìš© í‘œì‹œ (agenda_order, agenda_title)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í•µì‹¬ íŒŒì¼ ìš”ì•½

| íŒŒì¼ | ì—­í•  | ì£¼ìš” í•¨ìˆ˜/ì»´í¬ë„ŒíŠ¸ |
|------|------|-------------------|
| `backend/app/services/llm.py` | LLM íŒŒì‹± | `parse_agenda_text()` - ê³„ì¸µ êµ¬ì¡° ìƒì„± |
| `frontend/src/routes/meetings/new/+page.svelte` | íšŒì˜ ìƒì„± | `convertItem()`, `handleSubmit()` âš ï¸ |
| `frontend/src/routes/meetings/[id]/+page.svelte` | íšŒì˜ ìƒì„¸ | `toggleAgenda()`, `toggleChild()` |
| `frontend/src/routes/meetings/[id]/record/+page.svelte` | ë…¹ìŒ | `findAgendaById()`, `handleChildAgendaChange()` |
| `frontend/src/routes/meetings/[id]/results/+page.svelte` | ê²°ê³¼ | `processingStatus`, íƒ­ UI, í´ë§ |
| `backend/app/services/result.py` | ê²°ê³¼ CRUD | `ResultService` í´ë˜ìŠ¤ |

---

## ê¶Œì¥ ì‚¬í•­

### 1. ì¦‰ì‹œ ìˆ˜ì • í•„ìš”
- [ ] **ìì‹ì•ˆê±´ ì €ì¥ ë¡œì§ êµ¬í˜„** (`new/+page.svelte`)
- [ ] Backend `parent_id` í•„ë“œ ì§€ì› í™•ì¸
- [ ] ì¬ê·€ ì €ì¥ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸

### 2. ê°œì„  ì‚¬í•­
- [ ] ìì‹ì•ˆê±´ ì‚­ì œ/ì´ë™ UI ì¶”ê°€
- [ ] ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ê³„ì¸µ ë³€ê²½
- [ ] ìì‹ì•ˆê±´ ìˆœì„œ ë³€ê²½ ê¸°ëŠ¥
- [ ] í† ë¡  ë‚´ìš©ê³¼ ìì‹ì•ˆê±´ ë§¤ì¹­ ì •í™•ë„ í™•ì¸

### 3. ë¬¸ì„œí™”
- [ ] `CLAUDE.md`ì— ìì‹ì•ˆê±´ êµ¬ì¡° ì„¤ëª… ì¶”ê°€
- [ ] API ë¬¸ì„œì— `children` í•„ë“œ ëª…ì‹œ
- [ ] ê³„ì¸µ ì œí•œ (depth 10) ì‚¬ìš©ì ê°€ì´ë“œ

---

## ê²°ë¡ 

MAX Meetingì€ **ê³„ì¸µí˜• ì•ˆê±´ êµ¬ì¡°ë¥¼ ì™„ì „íˆ ì§€ì›**í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìœ¼ë‚˜, **íšŒì˜ ìƒì„± ì‹œ ìì‹ì•ˆê±´ì´ ì €ì¥ë˜ì§€ ì•ŠëŠ” ë²„ê·¸**ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. 

**ì‘ë™í•˜ëŠ” ë¶€ë¶„:**
- âœ… LLM íŒŒì‹± (ê³„ì¸µ êµ¬ì¡° ìƒì„±)
- âœ… í”„ë¡ íŠ¸ì—”ë“œ ë³€í™˜ (ì¬ê·€)
- âœ… íšŒì˜ ìƒì„¸ UI (ì¤‘ì²© í† ê¸€)
- âœ… ë…¹ìŒ í˜ì´ì§€ íƒ€ì„ìŠ¤íƒ¬í”„ (ìì‹ì•ˆê±´ ì§€ì›)
- âœ… ê²°ê³¼ í˜ì´ì§€ ì§„í–‰ ìƒíƒœ í‘œì‹œ

**ì‘ë™í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„:**
- âŒ íšŒì˜ ìƒì„± API í˜¸ì¶œ (children í•„ë“œ ëˆ„ë½)

ì´ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ë©´ ì „ì²´ ìì‹ì•ˆê±´ ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•  ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤.

