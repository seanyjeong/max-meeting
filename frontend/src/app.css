@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	:root {
		/* Light theme variables */
		--bg-primary: 249 250 251;
		--bg-secondary: 255 255 255;
		--text-primary: 17 24 39;
		--text-secondary: 107 114 128;

		/* Layout dimensions */
		--sidebar-width: 280px;
		--detail-panel-width: 400px;
		--header-height: 64px;

		/* Touch targets */
		--touch-target-sm: 44px;
		--touch-target-md: 48px;
		--touch-target-lg: 56px;
	}

	.dark {
		/* Catppuccin Mocha inspired dark theme */
		--bg-primary: 30 30 46;        /* base */
		--bg-secondary: 49 50 68;      /* surface */
		--text-primary: 205 214 244;   /* text */
		--text-secondary: 166 173 200; /* subtext */
	}

	body {
		@apply bg-gray-50 text-gray-900 dark:bg-base dark:text-text;
		font-feature-settings: "kern" 1, "liga" 1;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
	}

	/* Selection color */
	::selection {
		@apply bg-primary-500/30;
	}
}

@layer components {
	/* Buttons */
	.btn {
		@apply px-4 py-2 rounded-lg font-medium transition-all duration-normal min-h-touch-lg;
		@apply inline-flex items-center justify-center gap-2;
		@apply active:scale-[0.98];
	}

	.btn-primary {
		@apply bg-primary-600 text-white;
		@apply hover:bg-primary-700;
		@apply focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-primary-500;
		@apply dark:bg-primary-500 dark:hover:bg-primary-400;
	}

	.btn-secondary {
		@apply bg-gray-200 text-gray-900;
		@apply hover:bg-gray-300;
		@apply focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-gray-500;
		@apply dark:bg-surface dark:text-text dark:hover:bg-surface-light;
	}

	.btn-danger {
		@apply bg-red-600 text-white;
		@apply hover:bg-red-700;
		@apply focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-red-500;
		@apply dark:bg-accent-red dark:hover:bg-red-400;
	}

	.btn-ghost {
		@apply bg-transparent text-gray-700;
		@apply hover:bg-gray-100;
		@apply dark:text-text-muted dark:hover:bg-surface;
	}

	.btn-outline {
		@apply bg-transparent border border-gray-300 text-gray-700;
		@apply hover:bg-gray-50;
		@apply dark:border-surface-light dark:text-text dark:hover:bg-surface;
	}

	/* Inputs */
	.input {
		@apply w-full px-3 py-2 border border-gray-300 rounded-lg;
		@apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent;
		@apply min-h-touch-lg;
		@apply dark:bg-surface dark:border-surface-light dark:text-text dark:placeholder-text-subtle;
		@apply transition-colors duration-fast;
	}

	/* Cards */
	.card {
		@apply bg-white rounded-2xl shadow-soft p-6;
		@apply dark:bg-surface dark:border dark:border-surface-light;
	}

	.card-hover {
		@apply card hover:shadow-medium hover:-translate-y-0.5 transition-all duration-normal;
	}

	/* Badge */
	.badge {
		@apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
	}

	.badge-primary {
		@apply bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-300;
	}

	.badge-success {
		@apply bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-accent-green;
	}

	.badge-warning {
		@apply bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-accent-yellow;
	}

	.badge-danger {
		@apply bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-accent-red;
	}

	/* Skeleton loading */
	.skeleton {
		@apply bg-gray-200 dark:bg-surface-light rounded animate-pulse;
	}

	.skeleton-text {
		@apply skeleton h-4 w-full rounded;
	}

	.skeleton-circle {
		@apply skeleton rounded-full;
	}

	/* Recording indicator animation */
	.recording-border {
		animation: recording-pulse 1.5s ease-in-out infinite;
	}

	@keyframes recording-pulse {
		0%,
		100% {
			box-shadow: inset 0 0 0 3px rgb(239 68 68);
		}
		50% {
			box-shadow: inset 0 0 0 5px rgb(239 68 68);
		}
	}

	/* 3-Column Layout */
	.layout-3col {
		@apply flex h-screen;
	}

	.layout-sidebar {
		@apply w-sidebar border-r border-gray-200 bg-white overflow-y-auto flex-shrink-0;
		@apply dark:bg-base-dark dark:border-surface;
	}

	.layout-main {
		@apply flex-1 overflow-y-auto;
	}

	.layout-detail {
		@apply w-detail-panel border-l border-gray-200 bg-white overflow-y-auto flex-shrink-0;
		@apply dark:bg-base-dark dark:border-surface;
	}
}

/* Focus visible for accessibility */
@layer utilities {
	.focus-visible-ring:focus-visible {
		@apply outline-none ring-2 ring-primary-500 ring-offset-2;
	}

	/* Touch-friendly tap targets */
	.touch-target {
		@apply min-h-touch min-w-touch;
	}

	.touch-target-lg {
		@apply min-h-touch-lg min-w-touch-lg;
	}

	/* Hide scrollbar but keep functionality */
	.scrollbar-hide {
		-ms-overflow-style: none;
		scrollbar-width: none;
	}
	.scrollbar-hide::-webkit-scrollbar {
		display: none;
	}

	/* Custom scrollbar for dark mode */
	.scrollbar-dark::-webkit-scrollbar {
		width: 8px;
		height: 8px;
	}
	.scrollbar-dark::-webkit-scrollbar-track {
		@apply bg-transparent;
	}
	.scrollbar-dark::-webkit-scrollbar-thumb {
		@apply bg-surface-light rounded-full;
	}
	.scrollbar-dark::-webkit-scrollbar-thumb:hover {
		@apply bg-text-subtle;
	}
}

/* Reduced motion for accessibility */
@media (prefers-reduced-motion: reduce) {
	*,
	::before,
	::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}

/* Enhanced focus indication for accessibility */
:focus-visible {
	outline: 2px solid theme('colors.primary.500');
	outline-offset: 2px;
}

/* Screen reader only content */
.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
	/* Disable hover effects on touch devices */
	.btn:hover {
		@apply transform-none;
	}

	/* Larger touch targets */
	.btn {
		@apply min-h-touch-xl;
	}

	.input {
		@apply min-h-touch-xl text-base;
	}
}
