const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./M6ba-4Nf.js","./CQIO9Ee8.js","./dEE0t6TH.js"])))=>i.map(i=>d[i]);
import"./CWj6FrbW.js";import{t as X,J as xa,L as Ta,Q as lr,be as cr,ad as Sa,ae as dr,ax as ur,bf as vr,bg as fr,aQ as Aa,a7 as mr,bh as gr,a8 as zt,a5 as hr,aH as pr,d as s,r as n,a as b,f as D,i as Pe,C as et,e as He,g as t,c as p,w as ze,k as tt,p as Ge,b as We,h as he,x as it,aE as Ba,y as Ve,z as Gt,E as Ea,n as Je,aF as Wt,bb as ia,l as Se,u as qa,o as ja,s as le,q as Ft}from"./dEE0t6TH.js";import{B as _r,i as Y}from"./C3dn6ghA.js";import{a as ue,s as Z,c as Mt,r as mt,h as $e,i as la,d as br,f as ra}from"./VgTo3XoD.js";import{b as kt}from"./AN34arei.js";import{p as ve,u as Ca,l as Ha,s as Ga}from"./DtOJ18OM.js";import{e as Me,i as je}from"./BIuLnvEe.js";import{a as Re}from"./nFeSIjG2.js";import{b as Vt,_ as yr}from"./CQIO9Ee8.js";import{a as Lt,s as Ot}from"./IoHDDGUh.js";import"./SOPJwHBT.js";import{s as Wa}from"./CioO7OKF.js";import{I as Va}from"./BKdK3YGV.js";import{U as kr}from"./C68XkAhl.js";import{T as wr}from"./CA1ZtVVl.js";function Ya(v,e,a=!1,o=!1,d=!1){var l=v,k="";X(()=>{var C=lr;if(k===(k=e()??"")){xa&&Ta();return}if(C.nodes!==null&&(cr(C.nodes.start,C.nodes.end),C.nodes=null),k!==""){if(xa){Sa.data;for(var x=Ta(),L=x;x!==null&&(x.nodeType!==dr||x.data!=="");)L=x,x=ur(x);if(x===null)throw vr(),fr;Aa(Sa,L),l=mr(x);return}var S=k+"";a?S=`<svg>${S}</svg>`:o&&(S=`<math>${S}</math>`);var g=gr(S);if((a||o)&&(g=zt(g)),Aa(zt(g),g.lastChild),a||o)for(;zt(g);)l.before(zt(g));else l.before(g)}})}function Dt(v,e,...a){var o=new _r(v);hr(()=>{const d=e()??null;o.ensure(d,d&&(l=>d(l,...a)))},pr)}var xr=D("<span><!></span>");function Ra(v,e){let a=ve(e,"variant",3,"gray"),o=ve(e,"size",3,"sm");const d={gray:"bg-gray-100 text-gray-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",purple:"bg-purple-100 text-purple-800"},l={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"};var k=xr(),C=s(k);Dt(C,()=>e.children),n(k),X(()=>ue(k,1,`inline-flex items-center rounded-full font-medium ${d[a()]??""} ${l[o()]??""}`)),b(v,k)}var Tr=D('<a role="button"><!></a>'),Sr=tt('<svg class="animate-spin -ml-1 mr-2 h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" aria-hidden="true"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Ar=D("<button><!> <!></button>");function Zt(v,e){let a=ve(e,"variant",3,"primary"),o=ve(e,"size",3,"md"),d=ve(e,"disabled",3,!1),l=ve(e,"loading",3,!1),k=ve(e,"type",3,"button"),C=ve(e,"class",3,"");const x="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",L={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500 dark:text-gray-300 dark:hover:bg-gray-800",outline:"bg-transparent border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-800"},S={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};let g=ze(()=>`${x} ${L[a()]} ${S[o()]} ${d()||l()?"opacity-50 cursor-not-allowed":""} ${C()}`);var w=et(),q=He(w);{var I=f=>{var u=Tr(),y=s(u);Dt(y,()=>e.children),n(u),X(()=>{Z(u,"href",e.href),ue(u,1,Mt(t(g))),Z(u,"aria-label",e["aria-label"])}),b(f,u)},c=f=>{var u=Ar();u.__click=function(...B){var W;(W=e.onclick)==null||W.apply(this,B)};var y=s(u);{var O=B=>{var W=Sr();b(B,W)};Y(y,B=>{l()&&B(O)})}var N=p(y,2);Dt(N,()=>e.children),n(u),X(()=>{Z(u,"type",k()),u.disabled=d(),ue(u,1,Mt(t(g))),Z(u,"title",e.title),Z(u,"aria-label",e["aria-label"]),Z(u,"aria-pressed",e["aria-pressed"]),Z(u,"aria-expanded",e["aria-expanded"]),Z(u,"aria-busy",l())}),b(f,u)};Y(q,f=>{e.href&&!d()?f(I):f(c,!1)})}b(v,w)}Pe(["click"]);var Er=D('<span class="text-red-500">*</span>'),Cr=D('<label class="block text-sm font-medium text-gray-700 mb-1"> <!></label>'),Rr=D('<p class="mt-1 text-sm text-red-600" role="alert"> </p>'),Ir=D("<div><!> <input/> <!></div>");function es(v,e){Ge(e,!0);let a=ve(e,"type",3,"text"),o=ve(e,"value",15,""),d=ve(e,"required",3,!1),l=ve(e,"disabled",3,!1),k=ve(e,"readonly",3,!1),C=ve(e,"class",3,"");const x=ze(()=>e.id||e.name||crypto.randomUUID());var L=Ir(),S=s(L);{var g=c=>{var f=Cr(),u=s(f),y=p(u);{var O=N=>{var B=Er();b(N,B)};Y(y,N=>{d()&&N(O)})}n(f),X(()=>{Z(f,"for",t(x)),he(u,`${e.label??""} `)}),b(c,f)};Y(S,c=>{e.label&&c(g)})}var w=p(S,2);mt(w),w.__input=function(...c){var f;(f=e.oninput)==null||f.apply(this,c)},w.__change=function(...c){var f;(f=e.onchange)==null||f.apply(this,c)};var q=p(w,2);{var I=c=>{var f=Rr(),u=s(f,!0);n(f),X(()=>{Z(f,"id",`${t(x)??""}-error`),he(u,e.error)}),b(c,f)};Y(q,c=>{e.error&&c(I)})}n(L),X(()=>{ue(L,1,Mt(C())),Z(w,"id",t(x)),Z(w,"name",e.name),Z(w,"type",a()),Z(w,"placeholder",e.placeholder),w.required=d(),w.disabled=l(),w.readOnly=k(),ue(w,1,`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent ${e.error?"border-red-300":"border-gray-300"} ${l()?"bg-gray-100 cursor-not-allowed":""}`),Z(w,"aria-invalid",e.error?"true":void 0),Z(w,"aria-describedby",e.error?`${t(x)}-error`:void 0)}),kt(w,o),b(v,L),We()}Pe(["input","change"]);var Mr=D('<div class="border-b border-gray-200 px-6 py-4"><div class="flex items-center justify-between"><h3 id="modal-title" class="text-lg font-medium text-gray-900"> </h3> <button type="button" class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500"><span class="sr-only">Close</span> <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div>'),Dr=D('<div class="border-t border-gray-200 px-6 py-4 bg-gray-50"><!></div>'),Lr=D('<div class="fixed inset-0 z-50 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true"><div class="flex min-h-screen items-center justify-center p-4"><div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div> <div><!> <div class="px-6 py-4"><!></div> <!></div></div></div>');function ts(v,e){Ge(e,!0);let a=ve(e,"open",15,!1),o=ve(e,"size",3,"md");const d={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};function l(){var g;a(!1),(g=e.onclose)==null||g.call(e)}function k(g){g.key==="Escape"&&l()}function C(g){g.target===g.currentTarget&&l()}var x=et();it("keydown",Ba,k);var L=He(x);{var S=g=>{var w=Lr(),q=s(w),I=s(q);I.__click=C;var c=p(I,2),f=s(c);{var u=W=>{var te=Mr(),ae=s(te),me=s(ae),fe=s(me,!0);n(me);var ne=p(me,2);ne.__click=l,n(ae),n(te),X(()=>he(fe,e.title)),b(W,te)};Y(f,W=>{e.title&&W(u)})}var y=p(f,2),O=s(y);Dt(O,()=>e.children),n(y);var N=p(y,2);{var B=W=>{var te=Dr(),ae=s(te);Dt(ae,()=>e.footer),n(te),b(W,te)};Y(N,W=>{e.footer&&W(B)})}n(c),n(q),n(w),X(()=>ue(c,1,`relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all w-full ${d[o()]??""}`)),b(g,w)};Y(L,g=>{a()&&g(S)})}b(v,x),We()}Pe(["click"]);const Or="max-meeting-recordings",Nr=1,lt="recording-chunks";let Ut=null;async function ca(){return Ut||new Promise((v,e)=>{const a=indexedDB.open(Or,Nr);a.onerror=()=>{e(new Error("Failed to open IndexedDB"))},a.onsuccess=()=>{Ut=a.result,v(Ut)},a.onupgradeneeded=o=>{const d=o.target.result;if(!d.objectStoreNames.contains(lt)){const l=d.createObjectStore(lt,{keyPath:"id",autoIncrement:!0});l.createIndex("meetingId","meetingId",{unique:!1}),l.createIndex("timestamp","timestamp",{unique:!1})}}})}async function Pr(v,e){const a=await ca();return new Promise((o,d)=>{const k=a.transaction(lt,"readwrite").objectStore(lt),C={meetingId:v,blob:e,timestamp:new Date},x=k.add(C);x.onerror=()=>{d(new Error("Failed to save recording chunk"))},x.onsuccess=()=>{o()}})}async function da(v){const e=await ca();return new Promise((a,o)=>{const C=e.transaction(lt,"readonly").objectStore(lt).index("meetingId").getAll(v);C.onerror=()=>{o(new Error("Failed to get recording chunks"))},C.onsuccess=()=>{const x=C.result;x.sort((L,S)=>new Date(L.timestamp).getTime()-new Date(S.timestamp).getTime()),a(x.map(L=>L.blob))}})}async function zr(v){const e=await ca();return new Promise((a,o)=>{const l=e.transaction(lt,"readwrite").objectStore(lt),C=l.index("meetingId").getAllKeys(v);C.onerror=()=>{o(new Error("Failed to clear recording chunks"))},C.onsuccess=()=>{const x=C.result;let L=x.length;if(L===0){a();return}x.forEach(S=>{const g=l.delete(S);g.onsuccess=()=>{L--,L===0&&a()},g.onerror=()=>{o(new Error("Failed to delete recording chunk"))}})}})}async function as(v){return(await da(v)).length>0}async function rs(v){const e=await da(v);return e.length===0?null:new Blob(e,{type:"audio/webm"})}const Fr=5*60*1e3;function Ur(){const{subscribe:v,set:e,update:a}=Gt({state:"idle",currentTime:0,duration:0,meetingId:null,startedAt:null,lastChunkSavedAt:null,audioChunks:[],error:null,batteryLevel:null,batteryCharging:!1});let o=null,d=null,l=null,k=null;const C=()=>{d&&clearInterval(d),d=setInterval(()=>{a(c=>({...c,currentTime:c.currentTime+1}))},1e3)},x=()=>{d&&(clearInterval(d),d=null)},L=async()=>{try{"wakeLock"in navigator&&(k=await navigator.wakeLock.request("screen"))}catch{}},S=async()=>{if(k){try{await k.release()}catch{}k=null}},g=c=>{"vibrate"in navigator&&navigator.vibrate(c)},w=async(c,f)=>{if(f.length!==0)try{const u=new Blob(f,{type:"audio/webm"});await Pr(c,u),a(y=>({...y,lastChunkSavedAt:new Date}))}catch(u){console.error("Failed to save recording chunk to IndexedDB:",u)}},q=c=>{l&&clearInterval(l),l=setInterval(async()=>{const f=Ea({subscribe:v});f.audioChunks.length>0&&(await w(c,f.audioChunks),g(100))},Fr)},I=()=>{l&&(clearInterval(l),l=null)};return{subscribe:v,async start(c){try{const f=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});o=new MediaRecorder(f,{mimeType:"audio/webm;codecs=opus"});const u=[];return o.ondataavailable=y=>{y.data.size>0&&(u.push(y.data),a(O=>({...O,audioChunks:[...O.audioChunks,y.data]})))},o.onerror=y=>{console.error("MediaRecorder error:",y),a(O=>({...O,error:"Recording error occurred"}))},o.start(1e3),await L(),C(),q(c),g(200),a(y=>({...y,state:"recording",meetingId:c,startedAt:new Date,currentTime:0,audioChunks:[],error:null})),!0}catch(f){const u=f instanceof Error?f.message:"Failed to start recording";return a(y=>({...y,error:u})),!1}},pause(){o&&o.state==="recording"&&(o.pause(),x(),g(100),a(c=>({...c,state:"paused"})))},resume(){o&&o.state==="paused"&&(o.resume(),C(),g(100),a(c=>({...c,state:"recording"})))},async stop(){return new Promise(c=>{if(!o||o.state==="inactive"){c(null);return}o.onstop=async()=>{x(),I(),await S();const f=Ea({subscribe:v}),u=new Blob(f.audioChunks,{type:"audio/webm"});g([100,50,100]),a(y=>({...y,state:"stopped",duration:y.currentTime})),o==null||o.stream.getTracks().forEach(y=>y.stop()),o=null,c(u)},o.stop()})},async clearSavedChunks(c){await zr(c)},async getSavedChunks(c){return da(c)},getMediaRecorder(){return o},updateBatteryStatus(c,f){a(u=>({...u,batteryLevel:c,batteryCharging:f}))},reset(){x(),I(),S(),o&&(o.stream.getTracks().forEach(c=>c.stop()),o=null),e({state:"idle",currentTime:0,duration:0,meetingId:null,startedAt:null,lastChunkSavedAt:null,audioChunks:[],error:null,batteryLevel:null,batteryCharging:!1})},async uploadRecording(c,f,u){try{const y=await Re.post(`/meetings/${c}/recordings`,{});console.log("[recording] 녹음 생성 응답:",y);const O=y.recording_id,N=1024*1024,B=f.size;let W=0;for(;W<B;){const te=f.slice(W,W+N),ae=await Re.uploadChunk(O,te,W,B);if(W+=te.size,u){const me=ae.bytes_received/B*100;u(me)}if(ae.is_complete)break}return{recordingId:O,success:!0}}catch(y){return console.error("Upload failed:",y),{recordingId:-1,success:!1}}}}}function Br(){const{subscribe:v,set:e,update:a}=Gt({analyserData:new Uint8Array(128),isAnalyserActive:!1});let o=null,d=null,l=null,k=0;const x=1e3/15,L=S=>{if(d){if(S-k>=x){const g=new Uint8Array(d.frequencyBinCount);d.getByteFrequencyData(g),a(w=>({...w,analyserData:g})),k=S}o=requestAnimationFrame(L)}};return{subscribe:v,start(S){l=new AudioContext;const g=l.createMediaStreamSource(S.stream);d=l.createAnalyser(),d.fftSize=256,g.connect(d),e({analyserData:new Uint8Array(d.frequencyBinCount),isAnalyserActive:!0}),o=requestAnimationFrame(L)},stop(){o&&(cancelAnimationFrame(o),o=null),d=null,l&&(l.close().catch(S=>{console.error("Failed to close AudioContext:",S)}),l=null),e({analyserData:new Uint8Array(128),isAnalyserActive:!1})}}}const wt=Ur(),ns=Br(),os=Ve(wt,v=>v.state==="recording"),ss=Ve(wt,v=>v.state==="paused");Ve(wt,v=>v.state==="stopped");const is=Ve(wt,v=>v.currentTime);Ve(wt,v=>v.error);const ls=Ve(wt,v=>v.batteryLevel===null||v.batteryCharging?null:v.batteryLevel<=10?"critical":v.batteryLevel<=20?"low":null);function qr(v){const e=Math.floor(v/3600),a=Math.floor(v%3600/60),o=v%60;return e>0?`${e.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`}Pe(["click"]);Pe(["click"]);var jr=D('<div class="w-4 h-4 bg-white rounded-sm svelte-k1raqx"></div> <span class="absolute inset-0 rounded-full border-2 border-red-400 animate-ping opacity-50 svelte-k1raqx"></span>',1),Hr=tt('<svg class="w-5 h-5 text-white ml-0.5 svelte-k1raqx" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z" class="svelte-k1raqx"></path></svg>'),Gr=D('<div class="w-3 h-3 bg-white rounded-full svelte-k1raqx"></div>'),Wr=D("<div></div>"),Vr=tt('<svg class="w-5 h-5 text-gray-700 dark:text-gray-200 svelte-k1raqx" fill="currentColor" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" class="svelte-k1raqx"></path></svg>'),Yr=tt('<svg class="w-5 h-5 text-gray-700 dark:text-gray-200 ml-0.5 svelte-k1raqx" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z" class="svelte-k1raqx"></path></svg>'),Kr=D('<button type="button" class="w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400 flex items-center justify-center svelte-k1raqx"><!></button>'),Xr=D('<span class="text-sm font-medium text-gray-500 dark:text-gray-400 whitespace-nowrap svelte-k1raqx">현재 안건:</span> <span class="text-sm font-semibold text-gray-900 dark:text-gray-100 truncate max-w-[400px] svelte-k1raqx"> </span>',1),Zr=D('<span class="text-sm text-gray-400 dark:text-gray-500 italic svelte-k1raqx">안건이 설정되지 않음</span>'),Qr=D('<div role="region" aria-label="녹음 컨트롤 바"><div class="h-full max-w-screen-2xl mx-auto px-4 flex items-center justify-between gap-4 svelte-k1raqx"><div class="flex items-center gap-3 svelte-k1raqx"><button type="button"><!></button> <div role="timer" aria-live="polite"> </div> <div class="flex items-center gap-0.5 h-8 svelte-k1raqx" aria-hidden="true"></div></div> <!> <div class="flex items-center gap-2 min-w-0 flex-1 justify-end svelte-k1raqx"><!></div></div></div>');function cs(v,e){Ge(e,!0);let a=ve(e,"isRecording",3,!1),o=ve(e,"isPaused",3,!1),d=ve(e,"recordingTime",3,0),l=ve(e,"currentAgenda",3,""),k=ve(e,"visualizationData",19,()=>new Uint8Array(8));const C=ze(()=>a()||o()),x=ze(()=>a()?"border-red-600":o()?"border-yellow-500":"border-gray-200"),L=ze(()=>a()?"bg-red-600":o()?"bg-yellow-500":"bg-gray-400"),S=ze(()=>a()?"text-red-600":o()?"text-yellow-600":"text-gray-500"),g=ze(()=>{if(k().length===0)return Array(8).fill(4);const K=8,Q=Math.floor(k().length/K),m=[];for(let h=0;h<K;h++){let A=0;for(let R=0;R<Q;R++)A+=k()[h*Q+R]||0;const i=A/Q,_=Math.max(4,Math.min(32,i/255*32));m.push(_)}return m});function w(){var K,Q,m;a()?(K=e.onStop)==null||K.call(e):o()?(Q=e.onResume)==null||Q.call(e):(m=e.onStart)==null||m.call(e)}function q(){var K,Q;a()?(K=e.onPause)==null||K.call(e):o()&&((Q=e.onResume)==null||Q.call(e))}var I=Qr(),c=s(I),f=s(c),u=s(f);u.__click=w;var y=s(u);{var O=K=>{var Q=jr();Je(2),b(K,Q)},N=K=>{var Q=et(),m=He(Q);{var h=i=>{var _=Hr();b(i,_)},A=i=>{var _=Gr();b(i,_)};Y(m,i=>{o()?i(h):i(A,!1)},!0)}b(K,Q)};Y(y,K=>{a()?K(O):K(N,!1)})}n(u);var B=p(u,2),W=s(B,!0);n(B);var te=p(B,2);Me(te,21,()=>t(g),je,(K,Q,m)=>{var h=Wr();let A;X(()=>{ue(h,1,`w-1 rounded-full transition-all duration-150 ${a()?"bg-red-500":o()?"bg-yellow-500":"bg-gray-300"}`,"svelte-k1raqx"),A=$e(h,`height: ${t(Q)??""}px;`,A,{"transition-delay":`${m*20}ms`})}),b(K,h)}),n(te),n(f);var ae=p(f,2);{var me=K=>{var Q=Kr();Q.__click=q;var m=s(Q);{var h=i=>{var _=Vr();b(i,_)},A=i=>{var _=Yr();b(i,_)};Y(m,i=>{a()?i(h):i(A,!1)})}n(Q),X(()=>Z(Q,"aria-label",a()?"일시정지":"재개")),b(K,Q)};Y(ae,K=>{t(C)&&K(me)})}var fe=p(ae,2),ne=s(fe);{var we=K=>{var Q=Xr(),m=p(He(Q),2),h=s(m,!0);n(m),X(()=>{Z(m,"title",l()),he(h,l())}),b(K,Q)},be=K=>{var Q=Zr();b(K,Q)};Y(ne,K=>{l()?K(we):K(be,!1)})}n(fe),n(c),n(I),X(K=>{ue(I,1,`fixed top-16 left-0 right-0 z-40 h-14 bg-white dark:bg-gray-900 border-b-2 ${t(x)??""} transition-colors duration-200 shadow-sm`,"svelte-k1raqx"),ue(u,1,`relative w-12 h-12 rounded-full ${t(L)??""} hover:opacity-90 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 flex items-center justify-center group`,"svelte-k1raqx"),Z(u,"aria-label",a()?"녹음 중지":o()?"녹음 재개":"녹음 시작"),ue(B,1,`text-lg font-mono font-bold ${t(S)??""} tracking-wider min-w-[84px]`,"svelte-k1raqx"),he(W,K)},[()=>qr(d())]),b(v,I),We()}Pe(["click"]);var Jr=D('<button type="button"></button>'),$r=D('<span class="inline-block mt-2 px-2.5 py-1 text-xs font-semibold bg-blue-100 text-blue-700 rounded-full svelte-1m880eq">진행중</span>'),en=D('<span class="inline-block mt-2 px-2.5 py-1 text-xs font-semibold bg-green-100 text-green-700 rounded-full svelte-1m880eq">완료</span>'),tn=D('<div class="bg-gray-50 rounded-xl p-4 border border-gray-100 svelte-1m880eq"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2 svelte-1m880eq">상세 내용</h3> <p class="text-sm text-gray-700 whitespace-pre-wrap leading-relaxed svelte-1m880eq"> </p></div>'),an=D('<p class="text-xs text-gray-600 mt-0.5 svelte-1m880eq"> </p>'),rn=D('<li class="flex items-start gap-2 svelte-1m880eq"><span class="text-blue-400 mt-0.5 svelte-1m880eq">•</span> <div class="svelte-1m880eq"><span class="text-sm font-medium text-gray-800 svelte-1m880eq"> </span> <!></div></li>'),nn=D('<div class="bg-blue-50 rounded-xl p-4 border border-blue-100 svelte-1m880eq"><h3 class="text-xs font-semibold text-blue-600 uppercase tracking-wide mb-3 svelte-1m880eq">하위 토픽</h3> <ul class="space-y-2 svelte-1m880eq"></ul></div>'),on=D('<label class="flex items-start gap-3 p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors min-h-[48px] svelte-1m880eq"><input type="checkbox" class="mt-0.5 w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer flex-shrink-0 svelte-1m880eq"/> <span> </span></label>'),sn=D('<div class="bg-white rounded-xl border border-gray-200 overflow-hidden svelte-1m880eq"><div class="px-4 py-3 bg-gray-50 border-b border-gray-200 flex items-center justify-between svelte-1m880eq"><h3 class="text-sm font-semibold text-gray-700 svelte-1m880eq">질문 체크리스트</h3> <span> </span></div> <div class="p-3 space-y-1 svelte-1m880eq"></div></div>'),ln=D('<div class="px-4 py-3 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-white svelte-1m880eq"><div class="flex items-center justify-between svelte-1m880eq"><span class="text-sm font-medium text-blue-600 svelte-1m880eq"> </span> <div class="flex gap-1.5 svelte-1m880eq"></div></div></div> <div class="flex-1 overflow-y-auto svelte-1m880eq"><div class="p-4 space-y-5 svelte-1m880eq"><div class="svelte-1m880eq"><h2 class="text-lg font-bold text-gray-900 leading-tight svelte-1m880eq"> </h2> <!></div> <!> <!> <!> <div class="bg-white rounded-xl border border-gray-200 overflow-hidden svelte-1m880eq"><div class="px-4 py-3 bg-gray-50 border-b border-gray-200 svelte-1m880eq"><h3 class="text-sm font-semibold text-gray-700 svelte-1m880eq">메모</h3></div> <div class="p-3 svelte-1m880eq"><textarea placeholder="이 안건에 대한 메모를 입력하세요..." rows="5" class="w-full px-4 py-3 text-base text-gray-900 placeholder-gray-400 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none transition-shadow duration-150 svelte-1m880eq"></textarea></div></div></div></div> <div class="border-t border-gray-200 bg-white p-4 svelte-1m880eq"><div class="flex gap-3 svelte-1m880eq"><button type="button"><svg class="w-5 h-5 svelte-1m880eq" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" class="svelte-1m880eq"></path></svg> 이전</button> <button type="button">다음 <svg class="w-5 h-5 svelte-1m880eq" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="svelte-1m880eq"></path></svg></button></div></div>',1),cn=D('<div class="flex-1 flex items-center justify-center text-gray-500 svelte-1m880eq"><p class="svelte-1m880eq">안건이 없습니다</p></div>'),dn=D('<div class="w-full h-full bg-white flex flex-col overflow-hidden svelte-1m880eq"><!></div>');function ds(v,e){Ge(e,!0);let a=ve(e,"currentAgendaIndex",15),o=new Map,d=ze(()=>e.agendas[a()]),l=ze(()=>t(d)&&e.notes.get(t(d).id)||""),k=ze(()=>t(d)?t(d).questions.filter(u=>u.answered).length:0),C=ze(()=>t(d)?t(d).questions.length:0);Wt(()=>{o.forEach(u=>clearTimeout(u)),o.clear()});function x(u){e.onQuestionToggle(u.id,!u.answered)}function L(u){if(!t(d))return;const O=u.target.value,N=t(d).id,B=o.get(N);B&&clearTimeout(B);const W=setTimeout(()=>{e.onNoteChange(N,O),o.delete(N)},500);o.set(N,W)}function S(){a()>0&&Ca(a,-1)}function g(){a()<e.agendas.length-1&&(t(d)&&e.onNextAgenda(t(d).id,e.recordingTime),Ca(a))}function w(u){u>=0&&u<e.agendas.length&&a(u)}var q=dn(),I=s(q);{var c=u=>{var y=ln(),O=He(y),N=s(O),B=s(N),W=s(B);n(B);var te=p(B,2);Me(te,21,()=>e.agendas,je,(se,J,re)=>{var z=Jr();z.__click=()=>w(re),Z(z,"aria-label",`안건 ${re+1}로 이동`),X(()=>ue(z,1,`w-2.5 h-2.5 rounded-full transition-all duration-200 ${re===a()?"bg-blue-600 scale-110":re<a()?"bg-blue-300":"bg-gray-300"}`,"svelte-1m880eq")),b(se,z)}),n(te),n(N),n(O);var ae=p(O,2),me=s(ae),fe=s(me),ne=s(fe),we=s(ne,!0);n(ne);var be=p(ne,2);{var K=se=>{var J=$r();b(se,J)},Q=se=>{var J=et(),re=He(J);{var z=ee=>{var de=en();b(ee,de)};Y(re,ee=>{t(d).status==="completed"&&ee(z)},!0)}b(se,J)};Y(be,se=>{t(d).status==="in_progress"?se(K):se(Q,!1)})}n(fe);var m=p(fe,2);{var h=se=>{var J=tn(),re=p(s(J),2),z=s(re,!0);n(re),n(J),X(()=>he(z,t(d).description)),b(se,J)};Y(m,se=>{t(d).description&&se(h)})}var A=p(m,2);{var i=se=>{var J=nn(),re=p(s(J),2);Me(re,21,()=>t(d).children,z=>z.id,(z,ee)=>{var de=rn(),oe=p(s(de),2),M=s(oe),G=s(M,!0);n(M);var E=p(M,2);{var P=ce=>{var Ae=an(),at=s(Ae,!0);n(Ae),X(()=>he(at,t(ee).description)),b(ce,Ae)};Y(E,ce=>{t(ee).description&&ce(P)})}n(oe),n(de),X(()=>he(G,t(ee).title)),b(z,de)}),n(re),n(J),b(se,J)};Y(A,se=>{t(d).children&&t(d).children.length>0&&se(i)})}var _=p(A,2);{var R=se=>{var J=sn(),re=s(J),z=p(s(re),2),ee=s(z);n(z),n(re);var de=p(re,2);Me(de,21,()=>t(d).questions,oe=>oe.id,(oe,M)=>{var G=on(),E=s(G);mt(E),E.__change=()=>x(t(M));var P=p(E,2),ce=s(P,!0);n(P),n(G),X(()=>{br(E,t(M).answered),ue(P,1,`text-sm text-gray-700 leading-relaxed flex-1 ${t(M).answered?"line-through text-gray-400":""}`,"svelte-1m880eq"),he(ce,t(M).question)}),b(oe,G)}),n(de),n(J),X(()=>{ue(z,1,`text-xs font-medium px-2.5 py-1 rounded-full ${t(k)===t(C)?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,"svelte-1m880eq"),he(ee,`${t(k)??""}/${t(C)??""}`)}),b(se,J)};Y(_,se=>{t(C)>0&&se(R)})}var H=p(_,2),F=p(s(H),2),$=s(F);ia($),$.__input=L,n(F),n(H),n(me),n(ae);var V=p(ae,2),ge=s(V),ke=s(ge);ke.__click=S;var pe=p(ke,2);pe.__click=g,n(ge),n(V),X(()=>{he(W,`안건 ${a()+1} / ${e.agendas.length??""}`),he(we,t(d).title),la($,t(l)),ke.disabled=a()===0,ue(ke,1,`flex-1 min-h-[52px] px-4 py-3 text-base font-medium rounded-xl transition-all duration-150 flex items-center justify-center gap-2
						${a()===0?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-700 hover:bg-gray-200 active:bg-gray-300"}`,"svelte-1m880eq"),pe.disabled=a()===e.agendas.length-1,ue(pe,1,`flex-1 min-h-[52px] px-4 py-3 text-base font-medium rounded-xl transition-all duration-150 flex items-center justify-center gap-2
						${a()===e.agendas.length-1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800"}`,"svelte-1m880eq")}),b(u,y)},f=u=>{var y=cn();b(u,y)};Y(I,u=>{t(d)?u(c):u(f,!1)})}n(q),b(v,q),We()}Pe(["click","change","input"]);function un(v,e){const a=Ha(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.563.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2026 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2026.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2026 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const o=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21"}],["path",{d:"m5.082 11.09 8.828 8.828"}]];Va(v,Ga({name:"eraser"},()=>a,{get iconNode(){return o},children:(d,l)=>{var k=et(),C=He(k);Wa(C,e,"default",{}),b(d,k)},$$slots:{default:!0}}))}function vn(v,e){const a=Ha(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.563.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2026 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2026.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2026 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const o=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]];Va(v,Ga({name:"pencil"},()=>a,{get iconNode(){return o},children:(d,l)=>{var k=et(),C=He(k);Wa(C,e,"default",{}),b(d,k)},$$slots:{default:!0}}))}var fn=D('<button type="button"></button>'),mn=D('<div class="sketch-container svelte-apgu8m"><div class="toolbar svelte-apgu8m"><div class="tool-group svelte-apgu8m"><button type="button" title="펜"><!></button> <button type="button" title="지우개"><!></button></div> <div class="color-group svelte-apgu8m"></div> <div class="width-group svelte-apgu8m"><input type="range" min="1" max="20" class="width-slider svelte-apgu8m"/> <span class="width-label svelte-apgu8m"> </span></div> <div class="action-group svelte-apgu8m"><button type="button" class="action-btn svelte-apgu8m" title="실행 취소"><!></button> <button type="button" class="action-btn svelte-apgu8m" title="전체 지우기"><!></button></div></div> <div class="canvas-wrapper svelte-apgu8m"><canvas class="sketch-canvas svelte-apgu8m"></canvas></div></div>');function Ka(v,e){Ge(e,!0);let a=ve(e,"height",3,"100%"),o=ve(e,"width",3,"100%");ve(e,"autoFocus",3,!0);let d,l=null,k=Se(!1),C=Se("#000000"),x=Se(3),L=Se(qa([])),S=null,g=Se("pen"),w=Se(!1),q=Se(null);const I=["#000000","#EF4444","#3B82F6","#10B981","#F59E0B","#8B5CF6"];ja(()=>{var M,G,E;if(d&&(l=d.getContext("2d"),!!l)){if(c(),window.addEventListener("resize",c),(M=e.initialSnapshot)!=null&&M.strokes)le(L,e.initialSnapshot.strokes,!0),f();else if((G=e.initialSnapshot)!=null&&G.dataUrl){const P=new Image;P.onload=()=>{l==null||l.drawImage(P,0,0)},P.src=e.initialSnapshot.dataUrl}(E=e.onEditorMount)==null||E.call(e,{getSnapshot:W,loadSnapshot:te,clearAll:ae})}}),Wt(()=>{window.removeEventListener("resize",c)});function c(){var G;if(!d||!l)return;const M=(G=d.parentElement)==null?void 0:G.getBoundingClientRect();M&&(d.width=M.width,d.height=M.height,f())}function f(){if(!(!l||!d)){l.fillStyle="#ffffff",l.fillRect(0,0,d.width,d.height);for(const M of t(L))u(M)}}function u(M){if(!(!l||M.points.length<2)){l.beginPath(),l.strokeStyle=M.color,l.lineWidth=M.width,l.lineCap="round",l.lineJoin="round",l.moveTo(M.points[0].x,M.points[0].y);for(let G=1;G<M.points.length;G++)l.lineTo(M.points[G].x,M.points[G].y);l.stroke()}}function y(M){const G=d.getBoundingClientRect();return{x:M.clientX-G.left,y:M.clientY-G.top}}function O(M){var E;if(M.pointerType==="pen"&&(le(w,!0),(E=e.onPencilDetected)==null||E.call(e)),t(w)&&M.pointerType==="touch"){M.preventDefault();return}if(t(q)!==null&&t(q)!==M.pointerId)return;le(k,!0),le(q,M.pointerId,!0),S={points:[y(M)],color:t(g)==="eraser"?"#ffffff":t(C),width:t(g)==="eraser"?20:t(x)},d.setPointerCapture(M.pointerId)}function N(M){if(t(w)&&M.pointerType==="touch"||t(q)!==M.pointerId||!t(k)||!S||!l)return;const G=y(M);if(S.points.push(G),S.points.length>=2){const E=S.points.length-1;l.beginPath(),l.strokeStyle=S.color,l.lineWidth=S.width,l.lineCap="round",l.lineJoin="round",l.moveTo(S.points[E-1].x,S.points[E-1].y),l.lineTo(S.points[E].x,S.points[E].y),l.stroke()}}function B(M){var G;if(t(q)===M.pointerId){if(!t(k)||!S){le(q,null);return}le(k,!1),le(q,null),S.points.length>1&&(le(L,[...t(L),S],!0),(G=e.onEditorChange)==null||G.call(e)),S=null,d.releasePointerCapture(M.pointerId)}}function W(){return{strokes:[...t(L)],dataUrl:d==null?void 0:d.toDataURL("image/png")}}function te(M){M!=null&&M.strokes&&(le(L,M.strokes,!0),f())}function ae(){var M;le(L,[],!0),f(),(M=e.onEditorChange)==null||M.call(e)}function me(){return{getSnapshot:W,loadSnapshot:te,clearAll:ae}}function fe(M){M==="eraser"?le(g,"eraser"):le(g,"pen")}function ne(){var M;t(L).length>0&&(le(L,t(L).slice(0,-1),!0),f(),(M=e.onEditorChange)==null||M.call(e))}function we(){}function be(){}function K(){}function Q(){}var m={getSnapshot:W,loadSnapshot:te,clearAll:ae,getEditor:me,setTool:fe,undo:ne,redo:we,zoomToFit:be,zoomIn:K,zoomOut:Q},h=mn(),A=s(h),i=s(A),_=s(i);_.__click=()=>le(g,"pen");var R=s(_);vn(R,{class:"w-5 h-5"}),n(_);var H=p(_,2);H.__click=()=>le(g,"eraser");var F=s(H);un(F,{class:"w-5 h-5"}),n(H),n(i);var $=p(i,2);Me($,21,()=>I,je,(M,G)=>{var E=fn();E.__click=()=>le(C,t(G),!0),X(()=>{ue(E,1,`color-btn ${t(C)===t(G)?"active":""}`,"svelte-apgu8m"),$e(E,`background-color: ${t(G)??""};`)}),b(M,E)}),n($);var V=p($,2),ge=s(V);mt(ge);var ke=p(ge,2),pe=s(ke);n(ke),n(V);var se=p(V,2),J=s(se);J.__click=ne;var re=s(J);kr(re,{class:"w-5 h-5"}),n(J);var z=p(J,2);z.__click=ae;var ee=s(z);wr(ee,{class:"w-5 h-5"}),n(z),n(se),n(A);var de=p(A,2),oe=s(de);return oe.__pointerdown=O,oe.__pointermove=N,oe.__pointerup=B,Vt(oe,M=>d=M,()=>d),n(de),n(h),X(()=>{$e(h,`height: ${a()??""}; width: ${o()??""};`),ue(_,1,`tool-btn ${t(g)==="pen"?"active":""}`,"svelte-apgu8m"),ue(H,1,`tool-btn ${t(g)==="eraser"?"active":""}`,"svelte-apgu8m"),he(pe,`${t(x)??""}px`)}),kt(ge,()=>t(x),M=>le(x,M)),it("pointerleave",oe,B),b(v,h),We(m)}Pe(["click","pointerdown","pointermove","pointerup"]);var gn=D(`<textarea placeholder="회의 노트를 작성하세요..." class="w-full h-full p-4 text-sm text-gray-900 placeholder-gray-400 border-0 resize-none focus:ring-0 focus:outline-none font-mono svelte-1p1mujb" style="font-family: 'SF Mono', 'Consolas', 'Monaco', 'Menlo', monospace;"></textarea>`),hn=D('<div class="w-full h-full"><!></div>'),pn=D('<div class="flex flex-col h-full bg-white"><div class="flex border-b border-gray-200"><button type="button" role="tab">텍스트</button> <button type="button" role="tab">스케치</button></div> <div class="flex-1 overflow-hidden" role="tabpanel"><!></div></div>');function us(v,e){Ge(e,!0);let a=ve(e,"activeTab",15),o=ve(e,"textContent",3,""),d=null,l=null;Wt(()=>{l&&clearTimeout(l)});function k(O){a(O),e.onTabChange(O)}function C(O){const B=O.target.value;l&&clearTimeout(l),l=setTimeout(()=>{e.onTextChange(B),l=null},500)}function x(){if(!d)return;const O=d.getSnapshot();O&&e.onSketchChange(O)}function L(){a()!=="sketch"&&k("sketch")}function S(O){return`flex-1 h-11 flex items-center justify-center text-sm font-medium transition-all duration-200 relative ${a()===O?"text-blue-600 after:absolute after:bottom-0 after:left-0 after:right-0 after:h-0.5 after:bg-blue-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`}var g=pn(),w=s(g),q=s(w);q.__click=()=>k("text");var I=p(q,2);I.__click=()=>k("sketch"),n(w);var c=p(w,2),f=s(c);{var u=O=>{var N=gn();ia(N),N.__input=C,X(()=>la(N,o())),b(O,N)},y=O=>{var N=et(),B=He(N);{var W=te=>{var ae=hn(),me=s(ae);Vt(Ka(me,{height:"100%",width:"100%",get initialSnapshot(){return e.sketchSnapshot},onEditorChange:x,onPencilDetected:L,autoFocus:!0}),fe=>d=fe,()=>d),n(ae),b(te,ae)};Y(B,te=>{a()==="sketch"&&te(W)},!0)}b(O,N)};Y(f,O=>{a()==="text"?O(u):O(y,!1)})}n(c),n(g),X((O,N)=>{ue(q,1,O,"svelte-1p1mujb"),Z(q,"aria-selected",a()==="text"),ue(I,1,N,"svelte-1p1mujb"),Z(I,"aria-selected",a()==="sketch")},[()=>Mt(S("text")),()=>Mt(S("sketch"))]),b(v,g),We()}Pe(["click","input"]);const Xa={black:"#1a1a1a",red:"#dc2626",blue:"#2563eb",green:"#16a34a",yellow:"#fbbf24",highlightYellow:"rgba(251, 191, 36, 0.4)",highlightGreen:"rgba(74, 222, 128, 0.4)",highlightPink:"rgba(244, 114, 182, 0.4)"},Za={thin:1,medium:2,thick:4,extraThick:8},Ia={currentTool:"draw",currentColor:Xa.black,strokeWidth:Za.medium,sketches:[],activeSketch:null,isDirty:!1,lastSavedAt:null,autoSaveEnabled:!0,editor:null};function _n(){const{subscribe:v,set:e,update:a}=Gt(Ia);let o=null;const d=3e4;function l(){o&&clearInterval(o),o=setInterval(()=>{a(g=>(g.isDirty&&g.autoSaveEnabled&&g.activeSketch&&x(g.activeSketch.meeting_id),g))},d)}function k(){o&&(clearInterval(o),o=null)}async function C(g){try{const w=await Re.get(`/meetings/${g}/sketches`);a(q=>({...q,sketches:w.data||[]}))}catch(w){console.error("Failed to load sketches:",w)}}async function x(g){a(w=>{var c,f,u;if(!w.editor||!w.isDirty)return w;const q=w.editor.store.getSnapshot(),I={meeting_id:g,agenda_id:((c=w.activeSketch)==null?void 0:c.agenda_id)??null,json_data:q,timestamp_seconds:((f=w.activeSketch)==null?void 0:f.timestamp_seconds)??null};(u=w.activeSketch)!=null&&u.id?Re.patch(`/sketches/${w.activeSketch.id}`,I).catch(console.error):Re.post(`/meetings/${g}/sketches`,I).then(y=>{a(O=>({...O,activeSketch:y.data,sketches:[...O.sketches,y.data]}))}).catch(console.error);try{localStorage.setItem(`sketch-${g}`,JSON.stringify(q)),localStorage.setItem(`sketch-tool-${g}`,w.currentTool),localStorage.setItem(`sketch-color-${g}`,w.currentColor)}catch{console.warn("Failed to save to localStorage")}return{...w,isDirty:!1,lastSavedAt:new Date}})}function L(g){try{const w=localStorage.getItem(`sketch-${g}`);return w?JSON.parse(w):null}catch{return null}}function S(g){try{const w=localStorage.getItem(`sketch-tool-${g}`),q=localStorage.getItem(`sketch-color-${g}`);(w||q)&&a(I=>({...I,currentTool:w||I.currentTool,currentColor:q||I.currentColor}))}catch{}}return{subscribe:v,COLORS:Xa,STROKE_WIDTHS:Za,setTool:g=>a(w=>({...w,currentTool:g})),setColor:g=>a(w=>({...w,currentColor:g})),setStrokeWidth:g=>a(w=>({...w,strokeWidth:g})),setEditor:g=>a(w=>({...w,editor:g})),markDirty:()=>a(g=>({...g,isDirty:!0})),setActiveSketch:g=>a(w=>({...w,activeSketch:g})),loadSketches:C,saveSketch:x,loadFromLocalStorage:L,loadLastToolPreferences:S,startAutoSave:l,stopAutoSave:k,setAutoSaveEnabled:g=>a(w=>({...w,autoSaveEnabled:g})),reset:()=>{k(),e(Ia)}}}const _e=_n();Ve(_e,v=>v.editor!==null);async function Qa(v,e=1920,a=1080){const d=new XMLSerializer().serializeToString(v),l=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),k=URL.createObjectURL(l),C=document.createElement("canvas");C.width=e,C.height=a;const x=C.getContext("2d");return x.fillStyle="white",x.fillRect(0,0,e,a),new Promise((L,S)=>{const g=new Image;g.onload=()=>{x.drawImage(g,0,0,e,a),URL.revokeObjectURL(k),C.toBlob(w=>{w?L(w):S(new Error("Failed to create PNG blob"))},"image/png")},g.onerror=S,g.src=k})}async function bn(v,e="sketch.pdf"){if(typeof window>"u")throw new Error("PDF export is only available in browser environment");const o=(await yr(()=>import("./M6ba-4Nf.js").then(C=>C.j),__vite__mapDeps([0,1,2]),import.meta.url)).default,d=await Qa(v),l=await yn(d),k=new o({orientation:"landscape",unit:"px",format:[1920,1080]});k.addImage(l,"PNG",0,0,1920,1080),k.save(e)}function yn(v){return new Promise((e,a)=>{const o=new FileReader;o.onloadend=()=>e(o.result),o.onerror=a,o.readAsDataURL(v)})}function kn(v,e){const a=URL.createObjectURL(v),o=document.createElement("a");o.href=a,o.download=e,o.click(),URL.revokeObjectURL(a)}var wn=D('<button type="button"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button>'),xn=D('<button type="button"></button>'),Tn=D('<button type="button"></button>'),Sn=D('<button type="button"><div class="stroke-preview svelte-10z0w3w"></div></button>'),An=D('<div class="toolbar-secondary svelte-10z0w3w"><div class="color-section svelte-10z0w3w"><span class="section-label svelte-10z0w3w">Colors</span> <div class="color-palette svelte-10z0w3w"></div></div> <div class="color-section svelte-10z0w3w"><span class="section-label svelte-10z0w3w">Highlighters</span> <div class="color-palette svelte-10z0w3w"></div></div> <div class="stroke-section svelte-10z0w3w"><span class="section-label svelte-10z0w3w">Stroke Width</span> <div class="stroke-options svelte-10z0w3w"></div></div> <div class="actions-section svelte-10z0w3w"><button type="button" class="export-btn svelte-10z0w3w" title="Export as PNG"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> PNG</button> <button type="button" class="export-btn svelte-10z0w3w" title="Export as PDF"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> PDF</button> <button type="button" class="clear-btn svelte-10z0w3w" title="Clear all"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> Clear All</button></div></div>'),En=D('<div><div class="toolbar-primary svelte-10z0w3w"><div class="tool-group svelte-10z0w3w"></div> <div class="divider svelte-10z0w3w" aria-hidden="true"></div> <div class="tool-group svelte-10z0w3w"><button type="button" class="tool-btn svelte-10z0w3w" title="Undo (Cmd+Z)" aria-label="Undo"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button> <button type="button" class="tool-btn svelte-10z0w3w" title="Redo (Cmd+Shift+Z)" aria-label="Redo"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button></div> <div class="divider svelte-10z0w3w" aria-hidden="true"></div> <button type="button" title="More options" aria-label="More options"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></button></div> <!></div>');function Cn(v,e){Ge(e,!0);const a=()=>Lt(_e,"$sketchStore",o),[o,d]=Ot();let l=ve(e,"disabled",3,!1),k=Se(!1);const C=[{id:"draw",icon:"pen",label:"Pen"},{id:"eraser",icon:"eraser",label:"Eraser"}],x=[{id:"black",value:_e.COLORS.black,label:"Black"},{id:"red",value:_e.COLORS.red,label:"Red"},{id:"blue",value:_e.COLORS.blue,label:"Blue"},{id:"green",value:_e.COLORS.green,label:"Green"}],L=[{id:"highlightYellow",value:_e.COLORS.highlightYellow,label:"Yellow Highlight"},{id:"highlightGreen",value:_e.COLORS.highlightGreen,label:"Green Highlight"},{id:"highlightPink",value:_e.COLORS.highlightPink,label:"Pink Highlight"}],S=[{id:"thin",value:_e.STROKE_WIDTHS.thin,label:"1px"},{id:"medium",value:_e.STROKE_WIDTHS.medium,label:"2px"},{id:"thick",value:_e.STROKE_WIDTHS.thick,label:"4px"},{id:"extraThick",value:_e.STROKE_WIDTHS.extraThick,label:"8px"}];function g(i){_e.setTool(i)}function w(i){_e.setColor(i)}function q(i){_e.setStrokeWidth(i)}function I(){le(k,!t(k))}async function c(){if(e.onExportPng)try{const i=await e.onExportPng();if(!i){alert("스케치를 내보낼 수 없습니다");return}const _=await Qa(i);kn(_,`sketch-${Date.now()}.png`)}catch(i){console.error("PNG 내보내기 실패:",i),alert("PNG 내보내기 중 오류가 발생했습니다")}}async function f(){if(e.onExportPdf)try{const i=await e.onExportPdf();if(!i){alert("스케치를 내보낼 수 없습니다");return}await bn(i,`sketch-${Date.now()}.pdf`)}catch(i){console.error("PDF 내보내기 실패:",i),alert("PDF 내보내기 중 오류가 발생했습니다")}}const u={pen:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z",eraser:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z",undo:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3",redo:"M15 15l6-6m0 0l-6-6m6 6H9a6 6 0 000 12h3",more:"M6.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM12.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM18.75 12a.75.75 0 11-1.5 0 .75.75 0 011.5 0z",trash:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",download:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"};var y=En();let O;var N=s(y),B=s(N);Me(B,21,()=>C,je,(i,_)=>{var R=wn();let H;R.__click=()=>g(t(_).id);var F=s(R),$=s(F);n(F),n(R),X(()=>{H=ue(R,1,"tool-btn svelte-10z0w3w",null,H,{active:a().currentTool===t(_).id}),Z(R,"title",t(_).label),R.disabled=l(),Z(R,"aria-label",t(_).label),Z(R,"aria-pressed",a().currentTool===t(_).id),Z($,"d",u[t(_).icon])}),b(i,R)}),n(B);var W=p(B,4),te=s(W);te.__click=function(...i){var _;(_=e.onUndo)==null||_.apply(this,i)};var ae=s(te),me=s(ae);n(ae),n(te);var fe=p(te,2);fe.__click=function(...i){var _;(_=e.onRedo)==null||_.apply(this,i)};var ne=s(fe),we=s(ne);n(ne),n(fe),n(W);var be=p(W,4);let K;be.__click=I;var Q=s(be),m=s(Q);n(Q),n(be),n(N);var h=p(N,2);{var A=i=>{var _=An(),R=s(_),H=p(s(R),2);Me(H,21,()=>x,je,(G,E)=>{var P=xn();let ce;P.__click=()=>w(t(E).value),X(()=>{ce=ue(P,1,"color-btn svelte-10z0w3w",null,ce,{active:a().currentColor===t(E).value}),$e(P,`background-color: ${t(E).value??""};`),Z(P,"title",t(E).label),P.disabled=l(),Z(P,"aria-label",t(E).label),Z(P,"aria-pressed",a().currentColor===t(E).value)}),b(G,P)}),n(H),n(R);var F=p(R,2),$=p(s(F),2);Me($,21,()=>L,je,(G,E)=>{var P=Tn();let ce;P.__click=()=>w(t(E).value),X(()=>{ce=ue(P,1,"color-btn highlighter svelte-10z0w3w",null,ce,{active:a().currentColor===t(E).value}),$e(P,`background-color: ${t(E).value??""};`),Z(P,"title",t(E).label),P.disabled=l(),Z(P,"aria-label",t(E).label),Z(P,"aria-pressed",a().currentColor===t(E).value)}),b(G,P)}),n($),n(F);var V=p(F,2),ge=p(s(V),2);Me(ge,21,()=>S,je,(G,E)=>{var P=Sn();let ce;P.__click=()=>q(t(E).value);var Ae=s(P);n(P),X(()=>{ce=ue(P,1,"stroke-btn svelte-10z0w3w",null,ce,{active:a().strokeWidth===t(E).value}),Z(P,"title",t(E).label),P.disabled=l(),Z(P,"aria-label",t(E).label),Z(P,"aria-pressed",a().strokeWidth===t(E).value),$e(Ae,`height: ${t(E).value??""}px; background-color: ${a().currentColor??""};`)}),b(G,P)}),n(ge),n(V);var ke=p(V,2),pe=s(ke);pe.__click=c;var se=s(pe),J=s(se);n(se),Je(),n(pe);var re=p(pe,2);re.__click=f;var z=s(re),ee=s(z);n(z),Je(),n(re);var de=p(re,2);de.__click=function(...G){var E;(E=e.onClear)==null||E.apply(this,G)};var oe=s(de),M=s(oe);n(oe),Je(),n(de),n(ke),n(_),X(()=>{pe.disabled=l(),Z(J,"d",u.download),re.disabled=l(),Z(ee,"d",u.download),de.disabled=l(),Z(M,"d",u.trash)}),b(i,_)};Y(h,i=>{t(k)&&i(A)})}n(y),X(()=>{O=ue(y,1,"sketch-toolbar svelte-10z0w3w",null,O,{disabled:l()}),te.disabled=l(),Z(me,"d",u.undo),fe.disabled=l(),Z(we,"d",u.redo),K=ue(be,1,"tool-btn svelte-10z0w3w",null,K,{active:t(k)}),be.disabled=l(),Z(be,"aria-expanded",t(k)),Z(m,"d",u.more)}),b(v,y),We(),d()}Pe(["click"]);var Rn=tt('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>'),In=tt('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>'),Mn=D('<h2 class="panel-title svelte-vrn5mi">Agenda</h2>'),Dn=tt('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),Ln=D('<li><span class="question-check svelte-vrn5mi"><!></span> <span class="question-text svelte-vrn5mi"> </span></li>'),On=D('<ul class="questions-list svelte-vrn5mi"></ul>'),Nn=D('<button type="button"><div class="agenda-header svelte-vrn5mi"><span class="agenda-number svelte-vrn5mi"></span> <span class="agenda-title svelte-vrn5mi"> </span></div> <div class="agenda-progress svelte-vrn5mi"><div></div></div> <!></button>'),Pn=D('<div class="agenda-list svelte-vrn5mi"></div>'),zn=D('<aside aria-label="Agenda panel"><div class="panel-header svelte-vrn5mi"><button type="button" class="collapse-btn svelte-vrn5mi"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg></button> <!></div> <!></aside>'),Fn=D('<span class="status-badge pencil svelte-vrn5mi"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg> Pencil Mode</span>'),Un=D('<span class="status-badge unsaved svelte-vrn5mi">Unsaved changes</span>'),Bn=D('<span class="status-badge saved svelte-vrn5mi"> </span>'),qn=D('<div class="sketch-pad svelte-vrn5mi"><!> <main class="sketch-area svelte-vrn5mi" aria-label="Sketch area"><div class="toolbar-container svelte-vrn5mi"><!> <div class="status-bar svelte-vrn5mi"><!> <!></div></div> <div class="canvas-container svelte-vrn5mi"><!></div></main></div>');function vs(v,e){Ge(e,!0);const a=()=>Lt(_e,"$sketchStore",o),[o,d]=Ot();let l=ve(e,"agendas",19,()=>[]),k=ve(e,"currentAgendaId",3,null),C=ve(e,"showAgendaPanel",3,!0),x,L=Se(!1),S=Se(!1);ja(()=>{_e.loadSketches(e.meetingId),_e.loadLastToolPreferences(e.meetingId),_e.startAutoSave()}),Wt(()=>{_e.saveSketch(e.meetingId),_e.stopAutoSave()});function g(i){_e.setEditor(i);const _=_e.loadFromLocalStorage(e.meetingId);if(_)try{i.store.loadSnapshot(_)}catch{console.warn("Failed to load local snapshot")}}function w(){_e.markDirty()}function q(){le(S,!0),a().currentTool!=="draw"&&_e.setTool("draw")}function I(){x==null||x.undo()}function c(){x==null||x.redo()}function f(){confirm("Are you sure you want to clear all sketches?")&&(x==null||x.clearAll())}function u(){le(L,!t(L))}function y(i){var _;(_=e.onAgendaChange)==null||_.call(e,i)}function O(i){return!i.questions||i.questions.length===0?0:i.questions.filter(R=>R.answered).length/i.questions.length*100}function N(i){(i.metaKey||i.ctrlKey)&&i.key==="z"&&(i.shiftKey?(i.preventDefault(),c()):(i.preventDefault(),I()))}var B=qn();it("keydown",Ba,N);var W=s(B);{var te=i=>{var _=zn();let R;var H=s(_),F=s(H);F.__click=u;var $=s(F),V=s($);{var ge=z=>{var ee=Rn();b(z,ee)},ke=z=>{var ee=In();b(z,ee)};Y(V,z=>{t(L)?z(ge):z(ke,!1)})}n($),n(F);var pe=p(F,2);{var se=z=>{var ee=Mn();b(z,ee)};Y(pe,z=>{t(L)||z(se)})}n(H);var J=p(H,2);{var re=z=>{var ee=Pn();Me(ee,21,l,je,(de,oe,M)=>{var G=Nn();let E;G.__click=()=>y(t(oe).id);var P=s(G),ce=s(P);ce.textContent=M+1;var Ae=p(ce,2),at=s(Ae,!0);n(Ae),n(P);var ct=p(P,2),gt=s(ct);let rt;n(ct);var nt=p(ct,2);{var Fe=Xe=>{var ht=On();Me(ht,21,()=>t(oe).questions,je,(Nt,dt)=>{var ut=Ln();let vt;var ot=s(ut),Be=s(ot);{var st=Tt=>{var _t=Dn();b(Tt,_t)};Y(Be,Tt=>{t(dt).answered&&Tt(st)})}n(ot);var pt=p(ot,2),xt=s(pt,!0);n(pt),n(ut),X(()=>{vt=ue(ut,1,"question-item svelte-vrn5mi",null,vt,{answered:t(dt).answered}),he(xt,t(dt).question)}),b(Nt,ut)}),n(ht),b(Xe,ht)};Y(nt,Xe=>{t(oe).questions&&t(oe).questions.length>0&&Xe(Fe)})}n(G),X(Xe=>{E=ue(G,1,"agenda-item svelte-vrn5mi",null,E,{active:k()===t(oe).id,completed:t(oe).status==="completed"}),he(at,t(oe).title),rt=ue(gt,1,"progress-bar svelte-vrn5mi",null,rt,{completed:t(oe).status==="completed"}),$e(gt,`width: ${Xe??""}%`)},[()=>O(t(oe))]),b(de,G)}),n(ee),b(z,ee)};Y(J,z=>{t(L)||z(re)})}n(_),X(()=>{R=ue(_,1,"agenda-panel svelte-vrn5mi",null,R,{collapsed:t(L)}),Z(F,"aria-label",t(L)?"Expand agenda panel":"Collapse agenda panel"),Z(F,"aria-expanded",!t(L))}),b(i,_)};Y(W,i=>{C()&&i(te)})}var ae=p(W,2),me=s(ae),fe=s(me);Cn(fe,{onUndo:I,onRedo:c,onClear:f});var ne=p(fe,2),we=s(ne);{var be=i=>{var _=Fn();b(i,_)};Y(we,i=>{t(S)&&i(be)})}var K=p(we,2);{var Q=i=>{var _=Un();b(i,_)},m=i=>{var _=et(),R=He(_);{var H=F=>{var $=Bn(),V=s($);n($),X(ge=>he(V,`Saved ${ge??""}`),[()=>a().lastSavedAt.toLocaleTimeString()]),b(F,$)};Y(R,F=>{a().lastSavedAt&&F(H)},!0)}b(i,_)};Y(K,i=>{a().isDirty?i(Q):i(m,!1)})}n(ne),n(me);var h=p(me,2),A=s(h);Vt(Ka(A,{onEditorMount:g,onEditorChange:w,onPencilDetected:q}),i=>x=i,()=>x),n(h),n(ae),n(B),b(v,B),We(),d()}Pe(["click"]);const Ma={currentResult:null,versions:[],selectedVersion:null,actionItems:[],transcriptSegments:[],editMode:!1,editedSummary:"",isLoading:!1,isGenerating:!1,error:null};function jn(){const{subscribe:v,set:e,update:a}=Gt(Ma);async function o(I){a(c=>({...c,isLoading:!0,error:null}));try{const[c,f]=await Promise.all([Re.get(`/meetings/${I}/results`).catch(()=>({data:[]})),Re.get(`/meetings/${I}/action-items`).catch(()=>({data:[]}))]),u=c.data||[],y=u.length>0?u[u.length-1]:null,O=u.map(N=>{var B;return{version:N.version,created_at:N.created_at,summary_preview:((B=N.summary)==null?void 0:B.slice(0,100))||""}});a(N=>({...N,currentResult:y,versions:O,actionItems:f.data||[],selectedVersion:(y==null?void 0:y.version)??null,editedSummary:(y==null?void 0:y.summary)??"",isLoading:!1}))}catch{a(f=>({...f,isLoading:!1,error:"Failed to load meeting result"}))}}async function d(I){try{const c=await Re.get(`/meetings/${I}/transcript`);a(f=>{var u;return{...f,transcriptSegments:((u=c.data)==null?void 0:u.segments)||[]}})}catch(c){console.error("Failed to load transcript:",c)}}async function l(I,c){a(f=>({...f,isLoading:!0}));try{const y=((await Re.get(`/meetings/${I}/results`)).data||[]).find(O=>O.version===c);if(y)a(O=>({...O,currentResult:y,selectedVersion:c,editedSummary:y.summary,isLoading:!1}));else throw new Error("Version not found")}catch{a(u=>({...u,isLoading:!1,error:"Failed to load version"}))}}async function k(I){a(c=>({...c,isLoading:!0}));try{let c="",f=null;if(a(y=>{var O;return c=y.editedSummary,f=((O=y.currentResult)==null?void 0:O.id)??null,y}),!f)throw new Error("No result to save");const u=await Re.patch(`/results/${f}`,{summary:c});a(y=>({...y,currentResult:u,editMode:!1,isLoading:!1,versions:[...y.versions,{version:u.version,created_at:u.created_at,summary_preview:u.summary.slice(0,100)}]}))}catch{a(f=>({...f,isLoading:!1,error:"Failed to save result"}))}}async function C(I){a(c=>({...c,isGenerating:!0,error:null}));try{const c=await Re.post(`/meetings/${I}/results`,{summary:""});a(f=>({...f,currentResult:c,editedSummary:c.summary||"",isGenerating:!1}))}catch{a(f=>({...f,isGenerating:!1,error:"Failed to generate result"}))}}async function x(I){a(c=>({...c,isGenerating:!0,error:null}));try{let c=null;if(a(u=>{var y;return c=((y=u.currentResult)==null?void 0:y.id)??null,u}),!c)throw new Error("No result to regenerate");const f=await Re.post(`/results/${c}/regenerate`);a(u=>({...u,currentResult:f,editedSummary:f.summary||"",isGenerating:!1}))}catch{a(f=>({...f,isGenerating:!1,error:"Failed to regenerate result"}))}}async function L(I){a(c=>({...c,isLoading:!0}));try{let c=null;if(a(u=>{var y;return c=((y=u.currentResult)==null?void 0:y.id)??null,u}),!c)throw new Error("No result to verify");const f=await Re.post(`/results/${c}/verify`);a(u=>({...u,currentResult:f,isLoading:!1}))}catch{a(f=>({...f,isLoading:!1,error:"Failed to verify result"}))}}async function S(I,c){try{const f=await Re.post(`/meetings/${I}/action-items`,c);a(u=>({...u,actionItems:[...u.actionItems,f.data]}))}catch{a(u=>({...u,error:"Failed to create action item"}))}}async function g(I,c){try{const f=await Re.patch(`/action-items/${I}`,c);a(u=>({...u,actionItems:u.actionItems.map(y=>y.id===I?f.data:y)}))}catch{a(u=>({...u,error:"Failed to update action item"}))}}async function w(I){try{await Re.delete(`/action-items/${I}`),a(c=>({...c,actionItems:c.actionItems.filter(f=>f.id!==I)}))}catch{a(f=>({...f,error:"Failed to delete action item"}))}}function q(I){a(c=>({...c,actionItems:I}))}return{subscribe:v,loadResult:o,loadTranscript:d,loadVersion:l,saveResult:k,generateResult:C,regenerateResult:x,verifyResult:L,createActionItem:S,updateActionItem:g,deleteActionItem:w,reorderActionItems:q,setEditMode:I=>a(c=>{var f;return{...c,editMode:I,editedSummary:I?((f=c.currentResult)==null?void 0:f.summary)??"":c.editedSummary}}),setEditedSummary:I=>a(c=>({...c,editedSummary:I})),clearError:()=>a(I=>({...I,error:null})),reset:()=>e(Ma)}}const Ne=jn(),fs=Ve(Ne,v=>v.currentResult!==null),ms=Ve(Ne,v=>{var e;return((e=v.currentResult)==null?void 0:e.is_verified)??!1});Ve(Ne,v=>v.actionItems.filter(e=>e.status==="pending"));Ve(Ne,v=>v.actionItems.filter(e=>e.status==="completed"));/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Ja,setPrototypeOf:Da,isFrozen:Hn,getPrototypeOf:Gn,getOwnPropertyDescriptor:Wn}=Object;let{freeze:De,seal:Ue,create:na}=Object,{apply:oa,construct:sa}=typeof Reflect<"u"&&Reflect;De||(De=function(e){return e});Ue||(Ue=function(e){return e});oa||(oa=function(e,a){for(var o=arguments.length,d=new Array(o>2?o-2:0),l=2;l<o;l++)d[l-2]=arguments[l];return e.apply(a,d)});sa||(sa=function(e){for(var a=arguments.length,o=new Array(a>1?a-1:0),d=1;d<a;d++)o[d-1]=arguments[d];return new e(...o)});const Bt=Le(Array.prototype.forEach),Vn=Le(Array.prototype.lastIndexOf),La=Le(Array.prototype.pop),At=Le(Array.prototype.push),Yn=Le(Array.prototype.splice),jt=Le(String.prototype.toLowerCase),Qt=Le(String.prototype.toString),Jt=Le(String.prototype.match),Et=Le(String.prototype.replace),Kn=Le(String.prototype.indexOf),Xn=Le(String.prototype.trim),qe=Le(Object.prototype.hasOwnProperty),Ie=Le(RegExp.prototype.test),Ct=Zn(TypeError);function Le(v){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var a=arguments.length,o=new Array(a>1?a-1:0),d=1;d<a;d++)o[d-1]=arguments[d];return oa(v,e,o)}}function Zn(v){return function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return sa(v,a)}}function ie(v,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jt;Da&&Da(v,null);let o=e.length;for(;o--;){let d=e[o];if(typeof d=="string"){const l=a(d);l!==d&&(Hn(e)||(e[o]=l),d=l)}v[d]=!0}return v}function Qn(v){for(let e=0;e<v.length;e++)qe(v,e)||(v[e]=null);return v}function Ke(v){const e=na(null);for(const[a,o]of Ja(v))qe(v,a)&&(Array.isArray(o)?e[a]=Qn(o):o&&typeof o=="object"&&o.constructor===Object?e[a]=Ke(o):e[a]=o);return e}function Rt(v,e){for(;v!==null;){const o=Wn(v,e);if(o){if(o.get)return Le(o.get);if(typeof o.value=="function")return Le(o.value)}v=Gn(v)}function a(){return null}return a}const Oa=De(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$t=De(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ea=De(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Jn=De(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ta=De(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$n=De(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Na=De(["#text"]),Pa=De(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),aa=De(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),za=De(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),qt=De(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),eo=Ue(/\{\{[\w\W]*|[\w\W]*\}\}/gm),to=Ue(/<%[\w\W]*|[\w\W]*%>/gm),ao=Ue(/\$\{[\w\W]*/gm),ro=Ue(/^data-[\-\w.\u00B7-\uFFFF]+$/),no=Ue(/^aria-[\-\w]+$/),$a=Ue(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oo=Ue(/^(?:\w+script|data):/i),so=Ue(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),er=Ue(/^html$/i),io=Ue(/^[a-z][.\w]*(-[.\w]+)+$/i);var Fa=Object.freeze({__proto__:null,ARIA_ATTR:no,ATTR_WHITESPACE:so,CUSTOM_ELEMENT:io,DATA_ATTR:ro,DOCTYPE_NAME:er,ERB_EXPR:to,IS_ALLOWED_URI:$a,IS_SCRIPT_OR_DATA:oo,MUSTACHE_EXPR:eo,TMPLIT_EXPR:ao});const It={element:1,text:3,progressingInstruction:7,comment:8,document:9},lo=function(){return typeof window>"u"?null:window},co=function(e,a){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let o=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(o=a.getAttribute(d));const l="dompurify"+(o?"#"+o:"");try{return e.createPolicy(l,{createHTML(k){return k},createScriptURL(k){return k}})}catch{return console.warn("TrustedTypes policy "+l+" could not be created."),null}},Ua=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function tr(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:lo();const e=j=>tr(j);if(e.version="3.3.1",e.removed=[],!v||!v.document||v.document.nodeType!==It.document||!v.Element)return e.isSupported=!1,e;let{document:a}=v;const o=a,d=o.currentScript,{DocumentFragment:l,HTMLTemplateElement:k,Node:C,Element:x,NodeFilter:L,NamedNodeMap:S=v.NamedNodeMap||v.MozNamedAttrMap,HTMLFormElement:g,DOMParser:w,trustedTypes:q}=v,I=x.prototype,c=Rt(I,"cloneNode"),f=Rt(I,"remove"),u=Rt(I,"nextSibling"),y=Rt(I,"childNodes"),O=Rt(I,"parentNode");if(typeof k=="function"){const j=a.createElement("template");j.content&&j.content.ownerDocument&&(a=j.content.ownerDocument)}let N,B="";const{implementation:W,createNodeIterator:te,createDocumentFragment:ae,getElementsByTagName:me}=a,{importNode:fe}=o;let ne=Ua();e.isSupported=typeof Ja=="function"&&typeof O=="function"&&W&&W.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:we,ERB_EXPR:be,TMPLIT_EXPR:K,DATA_ATTR:Q,ARIA_ATTR:m,IS_SCRIPT_OR_DATA:h,ATTR_WHITESPACE:A,CUSTOM_ELEMENT:i}=Fa;let{IS_ALLOWED_URI:_}=Fa,R=null;const H=ie({},[...Oa,...$t,...ea,...ta,...Na]);let F=null;const $=ie({},[...Pa,...aa,...za,...qt]);let V=Object.seal(na(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ge=null,ke=null;const pe=Object.seal(na(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let se=!0,J=!0,re=!1,z=!0,ee=!1,de=!0,oe=!1,M=!1,G=!1,E=!1,P=!1,ce=!1,Ae=!0,at=!1;const ct="user-content-";let gt=!0,rt=!1,nt={},Fe=null;const Xe=ie({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ht=null;const Nt=ie({},["audio","video","img","source","image","track"]);let dt=null;const ut=ie({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vt="http://www.w3.org/1998/Math/MathML",ot="http://www.w3.org/2000/svg",Be="http://www.w3.org/1999/xhtml";let st=Be,pt=!1,xt=null;const Tt=ie({},[vt,ot,Be],Qt);let _t=ie({},["mi","mo","mn","ms","mtext"]),Pt=ie({},["annotation-xml"]);const ar=ie({},["title","style","font","a","script"]);let St=null;const rr=["application/xhtml+xml","text/html"],nr="text/html";let Te=null,bt=null;const or=a.createElement("form"),ua=function(r){return r instanceof RegExp||r instanceof Function},Yt=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(bt&&bt===r)){if((!r||typeof r!="object")&&(r={}),r=Ke(r),St=rr.indexOf(r.PARSER_MEDIA_TYPE)===-1?nr:r.PARSER_MEDIA_TYPE,Te=St==="application/xhtml+xml"?Qt:jt,R=qe(r,"ALLOWED_TAGS")?ie({},r.ALLOWED_TAGS,Te):H,F=qe(r,"ALLOWED_ATTR")?ie({},r.ALLOWED_ATTR,Te):$,xt=qe(r,"ALLOWED_NAMESPACES")?ie({},r.ALLOWED_NAMESPACES,Qt):Tt,dt=qe(r,"ADD_URI_SAFE_ATTR")?ie(Ke(ut),r.ADD_URI_SAFE_ATTR,Te):ut,ht=qe(r,"ADD_DATA_URI_TAGS")?ie(Ke(Nt),r.ADD_DATA_URI_TAGS,Te):Nt,Fe=qe(r,"FORBID_CONTENTS")?ie({},r.FORBID_CONTENTS,Te):Xe,ge=qe(r,"FORBID_TAGS")?ie({},r.FORBID_TAGS,Te):Ke({}),ke=qe(r,"FORBID_ATTR")?ie({},r.FORBID_ATTR,Te):Ke({}),nt=qe(r,"USE_PROFILES")?r.USE_PROFILES:!1,se=r.ALLOW_ARIA_ATTR!==!1,J=r.ALLOW_DATA_ATTR!==!1,re=r.ALLOW_UNKNOWN_PROTOCOLS||!1,z=r.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ee=r.SAFE_FOR_TEMPLATES||!1,de=r.SAFE_FOR_XML!==!1,oe=r.WHOLE_DOCUMENT||!1,E=r.RETURN_DOM||!1,P=r.RETURN_DOM_FRAGMENT||!1,ce=r.RETURN_TRUSTED_TYPE||!1,G=r.FORCE_BODY||!1,Ae=r.SANITIZE_DOM!==!1,at=r.SANITIZE_NAMED_PROPS||!1,gt=r.KEEP_CONTENT!==!1,rt=r.IN_PLACE||!1,_=r.ALLOWED_URI_REGEXP||$a,st=r.NAMESPACE||Be,_t=r.MATHML_TEXT_INTEGRATION_POINTS||_t,Pt=r.HTML_INTEGRATION_POINTS||Pt,V=r.CUSTOM_ELEMENT_HANDLING||{},r.CUSTOM_ELEMENT_HANDLING&&ua(r.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=r.CUSTOM_ELEMENT_HANDLING.tagNameCheck),r.CUSTOM_ELEMENT_HANDLING&&ua(r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),r.CUSTOM_ELEMENT_HANDLING&&typeof r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(V.allowCustomizedBuiltInElements=r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ee&&(J=!1),P&&(E=!0),nt&&(R=ie({},Na),F=[],nt.html===!0&&(ie(R,Oa),ie(F,Pa)),nt.svg===!0&&(ie(R,$t),ie(F,aa),ie(F,qt)),nt.svgFilters===!0&&(ie(R,ea),ie(F,aa),ie(F,qt)),nt.mathMl===!0&&(ie(R,ta),ie(F,za),ie(F,qt))),r.ADD_TAGS&&(typeof r.ADD_TAGS=="function"?pe.tagCheck=r.ADD_TAGS:(R===H&&(R=Ke(R)),ie(R,r.ADD_TAGS,Te))),r.ADD_ATTR&&(typeof r.ADD_ATTR=="function"?pe.attributeCheck=r.ADD_ATTR:(F===$&&(F=Ke(F)),ie(F,r.ADD_ATTR,Te))),r.ADD_URI_SAFE_ATTR&&ie(dt,r.ADD_URI_SAFE_ATTR,Te),r.FORBID_CONTENTS&&(Fe===Xe&&(Fe=Ke(Fe)),ie(Fe,r.FORBID_CONTENTS,Te)),r.ADD_FORBID_CONTENTS&&(Fe===Xe&&(Fe=Ke(Fe)),ie(Fe,r.ADD_FORBID_CONTENTS,Te)),gt&&(R["#text"]=!0),oe&&ie(R,["html","head","body"]),R.table&&(ie(R,["tbody"]),delete ge.tbody),r.TRUSTED_TYPES_POLICY){if(typeof r.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ct('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof r.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ct('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=r.TRUSTED_TYPES_POLICY,B=N.createHTML("")}else N===void 0&&(N=co(q,d)),N!==null&&typeof B=="string"&&(B=N.createHTML(""));De&&De(r),bt=r}},va=ie({},[...$t,...ea,...Jn]),fa=ie({},[...ta,...$n]),sr=function(r){let T=O(r);(!T||!T.tagName)&&(T={namespaceURI:st,tagName:"template"});const U=jt(r.tagName),ye=jt(T.tagName);return xt[r.namespaceURI]?r.namespaceURI===ot?T.namespaceURI===Be?U==="svg":T.namespaceURI===vt?U==="svg"&&(ye==="annotation-xml"||_t[ye]):!!va[U]:r.namespaceURI===vt?T.namespaceURI===Be?U==="math":T.namespaceURI===ot?U==="math"&&Pt[ye]:!!fa[U]:r.namespaceURI===Be?T.namespaceURI===ot&&!Pt[ye]||T.namespaceURI===vt&&!_t[ye]?!1:!fa[U]&&(ar[U]||!va[U]):!!(St==="application/xhtml+xml"&&xt[r.namespaceURI]):!1},Ye=function(r){At(e.removed,{element:r});try{O(r).removeChild(r)}catch{f(r)}},ft=function(r,T){try{At(e.removed,{attribute:T.getAttributeNode(r),from:T})}catch{At(e.removed,{attribute:null,from:T})}if(T.removeAttribute(r),r==="is")if(E||P)try{Ye(T)}catch{}else try{T.setAttribute(r,"")}catch{}},ma=function(r){let T=null,U=null;if(G)r="<remove></remove>"+r;else{const xe=Jt(r,/^[\r\n\t ]+/);U=xe&&xe[0]}St==="application/xhtml+xml"&&st===Be&&(r='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+r+"</body></html>");const ye=N?N.createHTML(r):r;if(st===Be)try{T=new w().parseFromString(ye,St)}catch{}if(!T||!T.documentElement){T=W.createDocument(st,"template",null);try{T.documentElement.innerHTML=pt?B:ye}catch{}}const Ce=T.body||T.documentElement;return r&&U&&Ce.insertBefore(a.createTextNode(U),Ce.childNodes[0]||null),st===Be?me.call(T,oe?"html":"body")[0]:oe?T.documentElement:Ce},ga=function(r){return te.call(r.ownerDocument||r,r,L.SHOW_ELEMENT|L.SHOW_COMMENT|L.SHOW_TEXT|L.SHOW_PROCESSING_INSTRUCTION|L.SHOW_CDATA_SECTION,null)},Kt=function(r){return r instanceof g&&(typeof r.nodeName!="string"||typeof r.textContent!="string"||typeof r.removeChild!="function"||!(r.attributes instanceof S)||typeof r.removeAttribute!="function"||typeof r.setAttribute!="function"||typeof r.namespaceURI!="string"||typeof r.insertBefore!="function"||typeof r.hasChildNodes!="function")},ha=function(r){return typeof C=="function"&&r instanceof C};function Ze(j,r,T){Bt(j,U=>{U.call(e,r,T,bt)})}const pa=function(r){let T=null;if(Ze(ne.beforeSanitizeElements,r,null),Kt(r))return Ye(r),!0;const U=Te(r.nodeName);if(Ze(ne.uponSanitizeElement,r,{tagName:U,allowedTags:R}),de&&r.hasChildNodes()&&!ha(r.firstElementChild)&&Ie(/<[/\w!]/g,r.innerHTML)&&Ie(/<[/\w!]/g,r.textContent)||r.nodeType===It.progressingInstruction||de&&r.nodeType===It.comment&&Ie(/<[/\w]/g,r.data))return Ye(r),!0;if(!(pe.tagCheck instanceof Function&&pe.tagCheck(U))&&(!R[U]||ge[U])){if(!ge[U]&&ba(U)&&(V.tagNameCheck instanceof RegExp&&Ie(V.tagNameCheck,U)||V.tagNameCheck instanceof Function&&V.tagNameCheck(U)))return!1;if(gt&&!Fe[U]){const ye=O(r)||r.parentNode,Ce=y(r)||r.childNodes;if(Ce&&ye){const xe=Ce.length;for(let Oe=xe-1;Oe>=0;--Oe){const Qe=c(Ce[Oe],!0);Qe.__removalCount=(r.__removalCount||0)+1,ye.insertBefore(Qe,u(r))}}}return Ye(r),!0}return r instanceof x&&!sr(r)||(U==="noscript"||U==="noembed"||U==="noframes")&&Ie(/<\/no(script|embed|frames)/i,r.innerHTML)?(Ye(r),!0):(ee&&r.nodeType===It.text&&(T=r.textContent,Bt([we,be,K],ye=>{T=Et(T,ye," ")}),r.textContent!==T&&(At(e.removed,{element:r.cloneNode()}),r.textContent=T)),Ze(ne.afterSanitizeElements,r,null),!1)},_a=function(r,T,U){if(Ae&&(T==="id"||T==="name")&&(U in a||U in or))return!1;if(!(J&&!ke[T]&&Ie(Q,T))){if(!(se&&Ie(m,T))){if(!(pe.attributeCheck instanceof Function&&pe.attributeCheck(T,r))){if(!F[T]||ke[T]){if(!(ba(r)&&(V.tagNameCheck instanceof RegExp&&Ie(V.tagNameCheck,r)||V.tagNameCheck instanceof Function&&V.tagNameCheck(r))&&(V.attributeNameCheck instanceof RegExp&&Ie(V.attributeNameCheck,T)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(T,r))||T==="is"&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&Ie(V.tagNameCheck,U)||V.tagNameCheck instanceof Function&&V.tagNameCheck(U))))return!1}else if(!dt[T]){if(!Ie(_,Et(U,A,""))){if(!((T==="src"||T==="xlink:href"||T==="href")&&r!=="script"&&Kn(U,"data:")===0&&ht[r])){if(!(re&&!Ie(h,Et(U,A,"")))){if(U)return!1}}}}}}}return!0},ba=function(r){return r!=="annotation-xml"&&Jt(r,i)},ya=function(r){Ze(ne.beforeSanitizeAttributes,r,null);const{attributes:T}=r;if(!T||Kt(r))return;const U={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:F,forceKeepAttr:void 0};let ye=T.length;for(;ye--;){const Ce=T[ye],{name:xe,namespaceURI:Oe,value:Qe}=Ce,yt=Te(xe),Xt=Qe;let Ee=xe==="value"?Xt:Xn(Xt);if(U.attrName=yt,U.attrValue=Ee,U.keepAttr=!0,U.forceKeepAttr=void 0,Ze(ne.uponSanitizeAttribute,r,U),Ee=U.attrValue,at&&(yt==="id"||yt==="name")&&(ft(xe,r),Ee=ct+Ee),de&&Ie(/((--!?|])>)|<\/(style|title|textarea)/i,Ee)){ft(xe,r);continue}if(yt==="attributename"&&Jt(Ee,"href")){ft(xe,r);continue}if(U.forceKeepAttr)continue;if(!U.keepAttr){ft(xe,r);continue}if(!z&&Ie(/\/>/i,Ee)){ft(xe,r);continue}ee&&Bt([we,be,K],wa=>{Ee=Et(Ee,wa," ")});const ka=Te(r.nodeName);if(!_a(ka,yt,Ee)){ft(xe,r);continue}if(N&&typeof q=="object"&&typeof q.getAttributeType=="function"&&!Oe)switch(q.getAttributeType(ka,yt)){case"TrustedHTML":{Ee=N.createHTML(Ee);break}case"TrustedScriptURL":{Ee=N.createScriptURL(Ee);break}}if(Ee!==Xt)try{Oe?r.setAttributeNS(Oe,xe,Ee):r.setAttribute(xe,Ee),Kt(r)?Ye(r):La(e.removed)}catch{ft(xe,r)}}Ze(ne.afterSanitizeAttributes,r,null)},ir=function j(r){let T=null;const U=ga(r);for(Ze(ne.beforeSanitizeShadowDOM,r,null);T=U.nextNode();)Ze(ne.uponSanitizeShadowNode,T,null),pa(T),ya(T),T.content instanceof l&&j(T.content);Ze(ne.afterSanitizeShadowDOM,r,null)};return e.sanitize=function(j){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=null,U=null,ye=null,Ce=null;if(pt=!j,pt&&(j="<!-->"),typeof j!="string"&&!ha(j))if(typeof j.toString=="function"){if(j=j.toString(),typeof j!="string")throw Ct("dirty is not a string, aborting")}else throw Ct("toString is not a function");if(!e.isSupported)return j;if(M||Yt(r),e.removed=[],typeof j=="string"&&(rt=!1),rt){if(j.nodeName){const Qe=Te(j.nodeName);if(!R[Qe]||ge[Qe])throw Ct("root node is forbidden and cannot be sanitized in-place")}}else if(j instanceof C)T=ma("<!---->"),U=T.ownerDocument.importNode(j,!0),U.nodeType===It.element&&U.nodeName==="BODY"||U.nodeName==="HTML"?T=U:T.appendChild(U);else{if(!E&&!ee&&!oe&&j.indexOf("<")===-1)return N&&ce?N.createHTML(j):j;if(T=ma(j),!T)return E?null:ce?B:""}T&&G&&Ye(T.firstChild);const xe=ga(rt?j:T);for(;ye=xe.nextNode();)pa(ye),ya(ye),ye.content instanceof l&&ir(ye.content);if(rt)return j;if(E){if(P)for(Ce=ae.call(T.ownerDocument);T.firstChild;)Ce.appendChild(T.firstChild);else Ce=T;return(F.shadowroot||F.shadowrootmode)&&(Ce=fe.call(o,Ce,!0)),Ce}let Oe=oe?T.outerHTML:T.innerHTML;return oe&&R["!doctype"]&&T.ownerDocument&&T.ownerDocument.doctype&&T.ownerDocument.doctype.name&&Ie(er,T.ownerDocument.doctype.name)&&(Oe="<!DOCTYPE "+T.ownerDocument.doctype.name+`>
`+Oe),ee&&Bt([we,be,K],Qe=>{Oe=Et(Oe,Qe," ")}),N&&ce?N.createHTML(Oe):Oe},e.setConfig=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Yt(j),M=!0},e.clearConfig=function(){bt=null,M=!1},e.isValidAttribute=function(j,r,T){bt||Yt({});const U=Te(j),ye=Te(r);return _a(U,ye,T)},e.addHook=function(j,r){typeof r=="function"&&At(ne[j],r)},e.removeHook=function(j,r){if(r!==void 0){const T=Vn(ne[j],r);return T===-1?void 0:Yn(ne[j],T,1)[0]}return La(ne[j])},e.removeHooks=function(j){ne[j]=[]},e.removeAllHooks=function(){ne=Ua()},e}var Ht=tr();const gs=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"}));var uo=D('<div class="preview-pane prose svelte-t5kvlk"><!></div>'),vo=D('<textarea class="editor-textarea svelte-t5kvlk" placeholder="Enter meeting summary in Markdown format..." aria-label="Meeting summary editor"></textarea>'),fo=D('<div class="summary-editor svelte-t5kvlk"><div class="editor-toolbar svelte-t5kvlk"><div class="toolbar-group svelte-t5kvlk"><button type="button" class="toolbar-btn svelte-t5kvlk" title="Heading 1">H1</button> <button type="button" class="toolbar-btn svelte-t5kvlk" title="Heading 2">H2</button> <button type="button" class="toolbar-btn svelte-t5kvlk" title="Heading 3">H3</button></div> <div class="toolbar-divider svelte-t5kvlk"></div> <div class="toolbar-group svelte-t5kvlk"><button type="button" class="toolbar-btn svelte-t5kvlk" title="Bold"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 12h9a4 4 0 014 4 4 4 0 01-4 4H6z"></path></svg></button> <button type="button" class="toolbar-btn svelte-t5kvlk" title="Italic"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 4h4m-2 0l-2 16m-2 0h4"></path></svg></button></div> <div class="toolbar-divider svelte-t5kvlk"></div> <div class="toolbar-group svelte-t5kvlk"><button type="button" class="toolbar-btn svelte-t5kvlk" title="Bullet list"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button> <button type="button" class="toolbar-btn svelte-t5kvlk" title="Numbered list"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path></svg></button></div> <div class="toolbar-spacer svelte-t5kvlk"></div> <button type="button"> </button></div> <div class="editor-content svelte-t5kvlk"><!></div> <div class="editor-footer svelte-t5kvlk"><span class="char-count svelte-t5kvlk"> </span></div></div>');function hs(v,e){Ge(e,!0);const a=()=>Lt(Ne,"$resultsStore",o),[o,d]=Ot();let l=ve(e,"readonly",3,!1),k=Se(!1),C=Se(null);function x(A){if(!A)return"";let i=A.replace(/^### (.*$)/gim,'<h3 class="text-lg font-semibold mt-4 mb-2">$1</h3>').replace(/^## (.*$)/gim,'<h2 class="text-xl font-semibold mt-4 mb-2">$1</h2>').replace(/^# (.*$)/gim,'<h1 class="text-2xl font-bold mt-4 mb-2">$1</h1>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^\s*[-*]\s+(.*)$/gim,'<li class="ml-4">$1</li>').replace(/^\s*\d+\.\s+(.*)$/gim,'<li class="ml-4 list-decimal">$1</li>').replace(/\n\n/g,'</p><p class="mb-2">').replace(/\n/g,"<br>");return Ht.sanitize(i)}function L(A){const i=A.target;Ne.setEditedSummary(i.value)}function S(){le(k,!t(k))}function g(A,i=""){if(!t(C)||l())return;const _=t(C),R=_.selectionStart,H=_.selectionEnd,F=a().editedSummary,$=F.substring(R,H),V=F.substring(0,R)+A+($||"text")+i+F.substring(H);Ne.setEditedSummary(V),requestAnimationFrame(()=>{_.focus();const ge=R+A.length+($?$.length:4);_.setSelectionRange(ge,ge)})}var w=fo(),q=s(w),I=s(q),c=s(I);c.__click=()=>g("# ");var f=p(c,2);f.__click=()=>g("## ");var u=p(f,2);u.__click=()=>g("### "),n(I);var y=p(I,4),O=s(y);O.__click=()=>g("**","**");var N=p(O,2);N.__click=()=>g("*","*"),n(y);var B=p(y,4),W=s(B);W.__click=()=>g("- ");var te=p(W,2);te.__click=()=>g("1. "),n(B);var ae=p(B,4);let me;ae.__click=S;var fe=s(ae,!0);n(ae),n(q);var ne=p(q,2),we=s(ne);{var be=A=>{var i=uo(),_=s(i);Ya(_,()=>x(a().editedSummary)),n(i),b(A,i)},K=A=>{var i=vo();ia(i),i.__input=L,Vt(i,_=>le(C,_),()=>t(C)),X(()=>{la(i,a().editedSummary),i.readOnly=l()}),b(A,i)};Y(we,A=>{t(k)?A(be):A(K,!1)})}n(ne);var Q=p(ne,2),m=s(Q),h=s(m);n(m),n(Q),n(w),X(()=>{var A;c.disabled=l(),f.disabled=l(),u.disabled=l(),O.disabled=l(),N.disabled=l(),W.disabled=l(),te.disabled=l(),me=ue(ae,1,"preview-toggle svelte-t5kvlk",null,me,{active:t(k)}),he(fe,t(k)?"Edit":"Preview"),he(h,`${(((A=a().editedSummary)==null?void 0:A.length)||0)??""} characters`)}),b(v,w),We(),d()}Pe(["click","input"]);var mo=tt('<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Add Item',1),go=D('<select class="form-select svelte-1kbu0hj"><option>Pending</option><option>In Progress</option><option>Completed</option></select>'),ho=D('<form class="item-form svelte-1kbu0hj"><div class="form-row svelte-1kbu0hj"><input type="text" class="form-input flex-1 svelte-1kbu0hj" placeholder="Action item content..." required/></div> <div class="form-row svelte-1kbu0hj"><input type="text" class="form-input svelte-1kbu0hj" placeholder="Assignee"/> <input type="date" class="form-input svelte-1kbu0hj"/> <select class="form-select svelte-1kbu0hj"><option>High</option><option>Medium</option><option>Low</option></select> <!></div> <div class="form-actions svelte-1kbu0hj"><!> <!></div></form>'),po=tt('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),_o=D('<span class="meta-item svelte-1kbu0hj"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> </span>'),bo=D('<span><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> </span>'),yo=D('<div class="item-actions svelte-1kbu0hj"><button type="button" class="action-btn svelte-1kbu0hj" aria-label="Edit"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button type="button" class="action-btn delete svelte-1kbu0hj" aria-label="Delete"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div>'),ko=D('<div class="drag-handle svelte-1kbu0hj" aria-hidden="true"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"></path></svg></div>'),wo=D('<li><button type="button"><!></button> <div class="item-content svelte-1kbu0hj"><p class="item-text svelte-1kbu0hj"> </p> <div class="item-meta svelte-1kbu0hj"><!> <!> <!> <!></div></div> <!> <!></li>'),xo=D('<li class="empty-state svelte-1kbu0hj"><svg class="w-12 h-12 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg> <p class="svelte-1kbu0hj">No action items yet</p></li>'),To=D('<div class="action-items svelte-1kbu0hj"><div class="header svelte-1kbu0hj"><h3 class="title svelte-1kbu0hj">Action Items</h3> <!></div> <!> <ul class="items-list svelte-1kbu0hj" role="list"></ul></div>');function ps(v,e){Ge(e,!0);const a=()=>Lt(Ne,"$resultsStore",o),[o,d]=Ot();let l=ve(e,"readonly",3,!1),k=Se(!1),C=Se(null),x=Se(null),L=Se(null),S=Se(qa({content:"",assignee_name:"",due_date:null,priority:"medium",status:"pending"}));const g={high:"red",medium:"yellow",low:"gray"},w={pending:"gray",in_progress:"blue",completed:"green"};function q(){le(S,{content:"",assignee_name:"",due_date:null,priority:"medium",status:"pending"},!0),le(k,!1),le(C,null)}async function I(){var m;(m=t(S).content)!=null&&m.trim()&&(await Ne.createActionItem(e.meetingId,{meeting_id:e.meetingId,content:t(S).content,due_date:t(S).due_date||null,priority:t(S).priority||"medium",status:"pending"}),q())}function c(m){le(C,m.id??null,!0),le(S,{...m},!0)}async function f(){var m;!t(C)||!((m=t(S).content)!=null&&m.trim())||(await Ne.updateActionItem(t(C),{content:t(S).content,due_date:t(S).due_date,priority:t(S).priority,status:t(S).status}),q())}async function u(m){confirm("Are you sure you want to delete this action item?")&&await Ne.deleteActionItem(m)}async function y(m){if(l()||!m.id)return;const h={pending:"in_progress",in_progress:"completed",completed:"pending"};await Ne.updateActionItem(m.id,{status:h[m.status]})}function O(m,h){le(x,h,!0),m.dataTransfer&&(m.dataTransfer.effectAllowed="move")}function N(m,h){m.preventDefault(),t(x)&&t(x).id!==h.id&&le(L,h.id??null,!0)}function B(){le(L,null)}function W(m,h){if(m.preventDefault(),le(L,null),!t(x)||t(x).id===h.id){le(x,null);return}const A=[...a().actionItems],i=A.findIndex(R=>R.id===t(x).id),_=A.findIndex(R=>R.id===h.id);i!==-1&&_!==-1&&(A.splice(i,1),A.splice(_,0,t(x)),Ne.reorderActionItems(A)),le(x,null)}function te(m){return m?new Date(m).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}):""}function ae(m){return m?new Date(m)<new Date:!1}var me=To(),fe=s(me),ne=p(s(fe),2);{var we=m=>{Zt(m,{variant:"primary",size:"sm",onclick:()=>le(k,!0),children:A=>{var i=mo();Je(),b(A,i)},$$slots:{default:!0}})};Y(ne,m=>{l()||m(we)})}n(fe);var be=p(fe,2);{var K=m=>{var h=ho(),A=s(h),i=s(A);mt(i),n(A);var _=p(A,2),R=s(_);mt(R);var H=p(R,2);mt(H);var F=p(H,2),$=s(F);$.value=$.__value="high";var V=p($);V.value=V.__value="medium";var ge=p(V);ge.value=ge.__value="low",n(F);var ke=p(F,2);{var pe=z=>{var ee=go(),de=s(ee);de.value=de.__value="pending";var oe=p(de);oe.value=oe.__value="in_progress";var M=p(oe);M.value=M.__value="completed",n(ee),ra(ee,()=>t(S).status,G=>t(S).status=G),b(z,ee)};Y(ke,z=>{t(C)&&z(pe)})}n(_);var se=p(_,2),J=s(se);Zt(J,{variant:"secondary",size:"sm",onclick:q,children:ee=>{Je();var de=Ft("Cancel");b(ee,de)},$$slots:{default:!0}});var re=p(J,2);Zt(re,{variant:"primary",size:"sm",type:"submit",children:ee=>{Je();var de=Ft();X(()=>he(de,t(C)?"Update":"Add")),b(ee,de)},$$slots:{default:!0}}),n(se),n(h),it("submit",h,z=>{z.preventDefault(),t(C)?f():I()}),kt(i,()=>t(S).content,z=>t(S).content=z),kt(R,()=>t(S).assignee_name,z=>t(S).assignee_name=z),kt(H,()=>t(S).due_date,z=>t(S).due_date=z),ra(F,()=>t(S).priority,z=>t(S).priority=z),b(m,h)};Y(be,m=>{(t(k)||t(C))&&m(K)})}var Q=p(be,2);Me(Q,5,()=>a().actionItems,m=>m.id,(m,h)=>{var A=wo();let i;var _=s(A);let R;_.__click=()=>y(t(h));var H=s(_);{var F=E=>{var P=po();b(E,P)};Y(H,E=>{t(h).status==="completed"&&E(F)})}n(_);var $=p(_,2),V=s($),ge=s(V,!0);n(V);var ke=p(V,2),pe=s(ke);{var se=E=>{var P=_o(),ce=p(s(P));n(P),X(()=>he(ce,` ${t(h).assignee_name??""}`)),b(E,P)};Y(pe,E=>{t(h).assignee_name&&E(se)})}var J=p(pe,2);{var re=E=>{var P=bo();let ce;var Ae=p(s(P));n(P),X((at,ct)=>{ce=ue(P,1,"meta-item svelte-1kbu0hj",null,ce,at),he(Ae,` ${ct??""}`)},[()=>({overdue:ae(t(h).due_date)&&t(h).status!=="completed"}),()=>te(t(h).due_date)]),b(E,P)};Y(J,E=>{t(h).due_date&&E(re)})}var z=p(J,2);Ra(z,{get variant(){return g[t(h).priority]},children:(E,P)=>{Je();var ce=Ft();X(()=>he(ce,t(h).priority)),b(E,ce)},$$slots:{default:!0}});var ee=p(z,2);Ra(ee,{get variant(){return w[t(h).status]},children:(E,P)=>{Je();var ce=Ft();X(Ae=>he(ce,Ae),[()=>t(h).status.replace("_"," ")]),b(E,ce)},$$slots:{default:!0}}),n(ke),n($);var de=p($,2);{var oe=E=>{var P=yo(),ce=s(P);ce.__click=()=>c(t(h));var Ae=p(ce,2);Ae.__click=()=>t(h).id&&u(t(h).id),n(P),b(E,P)};Y(de,E=>{l()||E(oe)})}var M=p(de,2);{var G=E=>{var P=ko();b(E,P)};Y(M,E=>{l()||E(G)})}n(A),X(()=>{i=ue(A,1,"item svelte-1kbu0hj",null,i,{completed:t(h).status==="completed","drag-over":t(L)===t(h).id}),Z(A,"draggable",!l()),R=ue(_,1,"status-checkbox svelte-1kbu0hj",null,R,{checked:t(h).status==="completed"}),_.disabled=l(),Z(_,"aria-label",t(h).status==="completed"?"Mark as pending":"Mark as completed"),he(ge,t(h).content)}),it("dragstart",A,E=>O(E,t(h))),it("dragover",A,E=>N(E,t(h))),it("dragleave",A,B),it("drop",A,E=>W(E,t(h))),b(m,A)},m=>{var h=xo();b(m,h)}),n(Q),n(me),b(v,me),We(),d()}Pe(["click"]);var So=D('<button type="button" class="clear-btn svelte-1gp1emd" aria-label="Clear search"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>'),Ao=D("<option> </option>"),Eo=D('<select class="speaker-filter svelte-1gp1emd"><option>All speakers</option><!></select>'),Co=D('<button type="button"><span class="legend-dot svelte-1gp1emd"></span> <span class="legend-name svelte-1gp1emd"> </span></button>'),Ro=D('<div class="speaker-legend svelte-1gp1emd"></div>'),Io=D('<span class="segment-speaker svelte-1gp1emd"> </span>'),Mo=D('<span class="confidence-warning svelte-1gp1emd"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></span>'),Do=D('<li class="segment svelte-1gp1emd"><button type="button" class="segment-btn svelte-1gp1emd"><span class="segment-time svelte-1gp1emd"> </span> <!> <span class="segment-text svelte-1gp1emd"><!></span> <!></button></li>'),Lo=D('<ul class="segments-list svelte-1gp1emd" role="list"></ul>'),Oo=D('<div class="empty-state svelte-1gp1emd"><svg class="w-12 h-12 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg> <p class="svelte-1gp1emd">No transcript available</p> <p class="text-sm svelte-1gp1emd">Transcript will appear after STT processing</p></div>'),No=D('<div class="empty-state svelte-1gp1emd"><svg class="w-12 h-12 mx-auto text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <p class="svelte-1gp1emd">No matching segments found</p></div>'),Po=D('<span class="stat svelte-1gp1emd"> </span>'),zo=D('<div class="viewer-footer svelte-1gp1emd"><span class="stat svelte-1gp1emd"> </span> <!></div>'),Fo=D('<div class="transcript-viewer svelte-1gp1emd"><div class="viewer-header svelte-1gp1emd"><h3 class="title svelte-1gp1emd">Transcript</h3> <div class="filters svelte-1gp1emd"><div class="search-box svelte-1gp1emd"><svg class="search-icon svelte-1gp1emd" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <input type="text" class="search-input svelte-1gp1emd" placeholder="Search transcript..."/> <!></div> <!></div></div> <!> <div class="segments-container svelte-1gp1emd"><!></div> <!></div>');function _s(v,e){Ge(e,!0);const a=()=>Lt(Ne,"$resultsStore",o),[o,d]=Ot();let l=ve(e,"highlightText",3,""),k=Se(""),C=Se(null),x=ze(()=>[...new Set(a().transcriptSegments.map(m=>m.speaker_label||m.speaker_name).filter(Boolean))]),L=ze(()=>a().transcriptSegments.filter(m=>{const h=!t(k)||m.text.toLowerCase().includes(t(k).toLowerCase()),A=!t(C)||m.speaker_label===t(C)||m.speaker_name===t(C);return h&&A}));function S(m){const h=Math.floor(m/60),A=Math.floor(m%60);return`${h.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`}function g(m){const h=t(k)||l();if(!h||!m)return Ht.sanitize(m);const A=m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),i=w(h),_=new RegExp(`(${i})`,"gi"),R=A.replace(_,'<mark class="bg-yellow-200 rounded px-0.5">$1</mark>');return Ht.sanitize(R)}function w(m){return m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(m){if(!m)return"#6b7280";const h=["#3b82f6","#22c55e","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316"],A=t(x).indexOf(m);return h[A%h.length]}function I(m){var h;(h=e.onSegmentClick)==null||h.call(e,m)}var c=Fo(),f=s(c),u=p(s(f),2),y=s(u),O=p(s(y),2);mt(O);var N=p(O,2);{var B=m=>{var h=So();h.__click=()=>le(k,""),b(m,h)};Y(N,m=>{t(k)&&m(B)})}n(y);var W=p(y,2);{var te=m=>{var h=Eo(),A=s(h);A.value=(A.__value=null)??"";var i=p(A);Me(i,17,()=>t(x),je,(_,R)=>{var H=Ao(),F=s(H,!0);n(H);var $={};X(()=>{he(F,t(R)),$!==($=t(R))&&(H.value=(H.__value=t(R))??"")}),b(_,H)}),n(h),ra(h,()=>t(C),_=>le(C,_)),b(m,h)};Y(W,m=>{t(x).length>0&&m(te)})}n(u),n(f);var ae=p(f,2);{var me=m=>{var h=Ro();Me(h,21,()=>t(x),je,(A,i)=>{var _=Co();let R;_.__click=()=>le(C,t(C)===t(i)?null:t(i),!0);var H=s(_),F=p(H,2),$=s(F,!0);n(F),n(_),X(V=>{R=ue(_,1,"legend-item svelte-1gp1emd",null,R,{active:t(C)===t(i)}),$e(H,`background-color: ${V??""}`),he($,t(i))},[()=>q(t(i))]),b(A,_)}),n(h),b(m,h)};Y(ae,m=>{t(x).length>0&&m(me)})}var fe=p(ae,2),ne=s(fe);{var we=m=>{var h=Lo();Me(h,23,()=>t(L),(A,i)=>A.id||i,(A,i)=>{var _=Do(),R=s(_);R.__click=()=>I(t(i));var H=s(R),F=s(H,!0);n(H);var $=p(H,2);{var V=J=>{var re=Io(),z=s(re,!0);n(re),X(ee=>{$e(re,`color: ${ee??""}`),he(z,t(i).speaker_name||t(i).speaker_label)},[()=>q(t(i).speaker_label||t(i).speaker_name||null)]),b(J,re)};Y($,J=>{(t(i).speaker_label||t(i).speaker_name)&&J(V)})}var ge=p($,2),ke=s(ge);Ya(ke,()=>g(t(i).text)),n(ge);var pe=p(ge,2);{var se=J=>{var re=Mo();X(z=>Z(re,"title",`Low confidence: ${z??""}%`),[()=>Math.round(t(i).confidence*100)]),b(J,re)};Y(pe,J=>{t(i).confidence!==void 0&&t(i).confidence<.7&&J(se)})}n(R),n(_),X(J=>he(F,J),[()=>S(t(i).start)]),b(A,_)}),n(h),b(m,h)},be=m=>{var h=et(),A=He(h);{var i=R=>{var H=Oo();b(R,H)},_=R=>{var H=No();b(R,H)};Y(A,R=>{a().transcriptSegments.length===0?R(i):R(_,!1)},!0)}b(m,h)};Y(ne,m=>{t(L).length>0?m(we):m(be,!1)})}n(fe);var K=p(fe,2);{var Q=m=>{var h=zo(),A=s(h),i=s(A);n(A);var _=p(A,2);{var R=H=>{var F=Po(),$=s(F);n(F),X(()=>he($,`${t(x).length??""} speakers`)),b(H,F)};Y(_,H=>{t(x).length>0&&H(R)})}n(h),X(()=>he(i,`${t(L).length??""} / ${a().transcriptSegments.length??""} segments`)),b(m,h)};Y(K,m=>{a().transcriptSegments.length>0&&m(Q)})}n(c),kt(O,()=>t(k),m=>le(k,m)),b(v,c),We(),d()}Pe(["click"]);export{ps as A,Zt as B,cs as C,es as I,ts as M,us as N,vn as P,hs as S,_s as T,_e as a,vs as b,is as c,ss as d,wt as e,qr as f,rs as g,fs as h,os as i,as as j,ds as k,ls as l,ms as m,Ra as n,gs as p,Ne as r,Dt as s,ns as v};
