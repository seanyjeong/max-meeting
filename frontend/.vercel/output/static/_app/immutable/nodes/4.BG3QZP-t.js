import"../chunks/CWj6FrbW.js";import{i as $e,p as be,l as $,u as R,o as xe,e as O,a as i,b as ye,v as ke,t as T,s as v,g as e,f as h,q as P,c as l,d,w as U,$ as Ce,r as c,n as _,h as W,x as we,k as ze}from"../chunks/dEE0t6TH.js";import{i as Y}from"../chunks/C3dn6ghA.js";import{h as Me}from"../chunks/C-8mY6PU.js";import{s as De,a as j}from"../chunks/IoHDDGUh.js";import{p as Le}from"../chunks/cT6OB_cF.js";import{g as B}from"../chunks/DzGFvkG0.js";import{c as E,s as Pe,a as je,b as Be}from"../chunks/BBLQcy37.js";import{B as Ee}from"../chunks/1ZOD2yLP.js";import{M as Ie,B as k,I as C}from"../chunks/DKX1Bax4.js";import{C as Se}from"../chunks/B1arvRME.js";import{L as qe}from"../chunks/6EBku0UH.js";import"../chunks/BNjbk8Ua.js";var Ae=h('<div class="flex justify-center py-12"><!></div>'),He=ze('<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> 삭제',1),Oe=h('<div class="bg-red-50 border border-red-200 rounded-lg p-4 text-red-700" role="alert"><p> </p> <button type="button" class="text-sm underline mt-2">닫기</button></div>'),Ve=h('<form class="space-y-6"><!> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><!> <!></div> <div class="flex justify-end gap-3 pt-4 border-t"><!> <!></div></form>'),Xe=h('<div class="flex items-center justify-between"><h1 class="text-2xl font-bold text-gray-900">연락처 수정</h1> <!></div> <!> <!>',1),Fe=h('<div class="flex justify-end gap-3"><!> <!></div>'),Ge=h('<p class="text-gray-600"><strong> </strong> 연락처를 삭제하시겠습니까?</p> <p class="text-sm text-gray-500 mt-2">이 작업은 되돌릴 수 없습니다.</p>',1),Je=h('<div class="space-y-6"><!> <!></div> <!>',1);function ot(Z,ee){be(ee,!0);const te=()=>j(Le,"$page",w),I=()=>j(Pe,"$selectedContact",w),V=()=>j(je,"$contactsError",w),ae=()=>j(Be,"$contactsLoading",w),[w,re]=De();let z=U(()=>parseInt(te().params.id||"",10)),a=$(R({name:"",role:"",organization:"",phone:"",email:""})),M=$(R({})),S=$(!1),b=$(!1),D=$(!1),X=$(!1);const oe=U(()=>{var t;return[{label:"Home",href:"/"},{label:"연락처",href:"/contacts"},{label:((t=I())==null?void 0:t.name)||"연락처 상세",href:`/contacts/${e(z)}`}]});xe(async()=>{const t=await E.fetchContact(e(z));t?(v(a,{name:t.name,role:t.role||"",organization:t.organization||"",phone:t.phone||"",email:t.email||""},!0),v(X,!0)):B("/contacts")});function ne(){var r;const t={};return(r=e(a).name)!=null&&r.trim()||(t.name="이름은 필수입니다"),e(a).email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e(a).email)&&(t.email="유효한 이메일 주소를 입력하세요"),e(a).phone&&!/^[\d\-+\s()]+$/.test(e(a).phone)&&(t.phone="유효한 전화번호를 입력하세요"),v(M,t,!0),Object.keys(t).length===0}async function se(t){var n,u,p,m,g;if(t.preventDefault(),!ne())return;v(S,!0);const r=await E.updateContact(e(z),{name:(n=e(a).name)==null?void 0:n.trim(),role:((u=e(a).role)==null?void 0:u.trim())||void 0,organization:((p=e(a).organization)==null?void 0:p.trim())||void 0,phone:((m=e(a).phone)==null?void 0:m.trim())||void 0,email:((g=e(a).email)==null?void 0:g.trim())||void 0});v(S,!1),r&&B("/contacts")}function le(){B("/contacts")}function ie(){v(b,!0)}async function de(){v(D,!0);const t=await E.deleteContact(e(z));v(D,!1),t?B("/contacts"):v(b,!1)}function ce(){v(b,!1)}var F=Je();Me("rtatpu",t=>{ke(()=>{var r;Ce.title=`${(((r=I())==null?void 0:r.name)||"연락처")??""} - MAX Meeting`})});var q=O(F),G=d(q);Ee(G,{get items(){return e(oe)}});var me=l(G,2);{var ve=t=>{var r=Ae(),n=d(r);qe(n,{size:"lg"}),c(r),i(t,r)},ue=t=>{var r=Xe(),n=O(r),u=l(d(n),2);k(u,{variant:"danger",onclick:ie,children:(o,x)=>{var f=He();_(),i(o,f)},$$slots:{default:!0}}),c(n);var p=l(n,2);{var m=o=>{var x=Oe(),f=d(x),L=d(f,!0);c(f);var y=l(f,2);y.__click=()=>E.clearError(),c(x),T(()=>W(L,V())),i(o,x)};Y(p,o=>{V()&&o(m)})}var g=l(p,2);Se(g,{children:(o,x)=>{var f=Ve(),L=d(f);C(L,{label:"이름",name:"name",required:!0,get error(){return e(M).name},placeholder:"홍길동",get value(){return e(a).name},set value(s){e(a).name=s}});var y=l(L,2),J=d(y);C(J,{label:"조직/회사",name:"organization",placeholder:"회사명",get value(){return e(a).organization},set value(s){e(a).organization=s}});var fe=l(J,2);C(fe,{label:"직책/역할",name:"role",placeholder:"대리",get value(){return e(a).role},set value(s){e(a).role=s}}),c(y);var A=l(y,2),K=d(A);C(K,{label:"전화번호",name:"phone",type:"tel",get error(){return e(M).phone},placeholder:"010-1234-5678",get value(){return e(a).phone},set value(s){e(a).phone=s}});var ge=l(K,2);C(ge,{label:"이메일",name:"email",type:"email",get error(){return e(M).email},placeholder:"example@email.com",get value(){return e(a).email},set value(s){e(a).email=s}}),c(A);var N=l(A,2),Q=d(N);k(Q,{variant:"secondary",type:"button",onclick:le,children:(s,he)=>{_();var H=P("취소");i(s,H)},$$slots:{default:!0}});var _e=l(Q,2);k(_e,{variant:"primary",type:"submit",get loading(){return e(S)},get disabled(){return ae()},children:(s,he)=>{_();var H=P("저장");i(s,H)},$$slots:{default:!0}}),c(N),c(f),we("submit",f,se),i(o,f)},$$slots:{default:!0}}),i(t,r)};Y(me,t=>{e(X)?t(ue,!1):t(ve)})}c(q);var pe=l(q,2);Ie(pe,{title:"연락처 삭제",size:"sm",get open(){return e(b)},set open(r){v(b,r,!0)},footer:r=>{var n=Fe(),u=d(n);k(u,{variant:"secondary",onclick:ce,get disabled(){return e(D)},children:(m,g)=>{_();var o=P("취소");i(m,o)},$$slots:{default:!0}});var p=l(u,2);k(p,{variant:"danger",onclick:de,get loading(){return e(D)},children:(m,g)=>{_();var o=P("삭제");i(m,o)},$$slots:{default:!0}}),c(n),i(r,n)},children:(r,n)=>{var u=Ge(),p=O(u),m=d(p),g=d(m,!0);c(m),_(),c(p),_(2),T(()=>{var o;return W(g,(o=I())==null?void 0:o.name)}),i(r,u)},$$slots:{footer:!0,default:!0}}),i(Z,F),ye(),re()}$e(["click"]);export{ot as component};
