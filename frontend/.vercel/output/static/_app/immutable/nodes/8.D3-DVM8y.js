import"../chunks/CWj6FrbW.js";import{i as fe}from"../chunks/SOPJwHBT.js";import{i as ue,p as ge,o as _e,A as xe,B as ye,C as T,e as I,a as o,b as he,v as be,s as k,g as t,$ as we,D as s,m as ot,f as d,d as r,r as a,c as v,t as y,h as f,k as At}from"../chunks/dEE0t6TH.js";import{i as u}from"../chunks/C3dn6ghA.js";import{e as nt}from"../chunks/BIuLnvEe.js";import{h as Me}from"../chunks/C-8mY6PU.js";import{a as vt,c as Lt,r as $e,d as ke,s as jt}from"../chunks/VgTo3XoD.js";import{s as Ce,a as ct}from"../chunks/IoHDDGUh.js";import{p as ze}from"../chunks/cT6OB_cF.js";import{g as Bt}from"../chunks/DzGFvkG0.js";import{a as dt}from"../chunks/nFeSIjG2.js";import{i as X,c as mt}from"../chunks/BEFWedIY.js";import{i as Le,g as je}from"../chunks/DX0v2BOn.js";var Be=d('<div class="flex justify-center py-12"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"></div></div>'),Ae=d('<div class="card text-center py-12"><p class="text-red-600"> </p> <button type="button" class="btn btn-primary mt-4">다시 시도</button></div>'),Re=d(`<div class="bg-yellow-50 border-l-4 border-yellow-400 p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-yellow-700">오프라인 모드입니다. 캐시된 데이터를 표시하고 있습니다. 일부 기능이 제한될 수
							있습니다.</p></div></div></div>`),De=d('<p class="mt-1 text-sm text-gray-500"> </p>'),Ee=d('<button type="button" class="btn btn-primary">회의 시작</button>'),Oe=d('<a class="btn btn-primary">회의 계속하기</a>'),Te=d('<a class="btn btn-primary">결과 보기</a>'),Ie=d('<span class="ml-1 text-gray-500"> </span>'),Se=d('<span class="inline-flex items-center px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-700"> <!></span>'),Fe=d('<div class="card"><h2 class="text-lg font-medium text-gray-900 mb-4"> </h2> <div class="flex flex-wrap gap-2"></div></div>'),Ke=d('<p class="text-sm text-gray-500">안건이 없습니다</p>'),Ve=At('<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'),He=At('<svg class="w-4 h-4 animate-pulse" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>'),Ne=d('<p class="mt-1 text-sm text-gray-500"> </p>'),Ue=d('<li class="flex items-start gap-2 text-sm"><input type="checkbox" disabled class="mt-0.5 h-4 w-4 rounded border-gray-300"/> <span> </span></li>'),We=d('<div class="mt-4 pl-9"><p class="text-sm font-medium text-gray-700 mb-2">토의 질문</p> <ul class="space-y-2"></ul></div>'),Xe=d('<div class="border border-gray-200 rounded-lg p-4"><div class="flex items-start justify-between"><div class="flex items-start gap-3"><span class="flex-shrink-0 w-6 h-6 rounded-full bg-gray-100 text-gray-600 flex items-center justify-center text-sm font-medium"> </span> <div><h3 class="font-medium text-gray-900 flex items-center gap-2"> <span><!></span></h3> <!></div></div></div> <!></div>'),qe=d('<div class="space-y-4"></div>'),Ge=d('<div class="space-y-6"><!> <nav class="text-sm text-gray-500" aria-label="Breadcrumb"><ol class="flex items-center space-x-2"><li><a href="/" class="hover:text-gray-700">홈</a></li> <li><span class="mx-1">/</span></li> <li><a href="/meetings" class="hover:text-gray-700">회의</a></li> <li><span class="mx-1">/</span></li> <li class="text-gray-900 font-medium"> </li></ol></nav> <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"><div><div class="flex items-center gap-3"><h1 class="text-2xl font-bold text-gray-900"> </h1> <span> </span></div> <!></div> <div class="flex items-center gap-2"><!> <button type="button" class="btn btn-secondary text-red-600">삭제</button></div></div> <div class="card"><h2 class="text-lg font-medium text-gray-900 mb-4">회의 상세</h2> <dl class="grid grid-cols-1 sm:grid-cols-2 gap-4"><div><dt class="text-sm font-medium text-gray-500">일시</dt> <dd class="mt-1 text-sm text-gray-900"> </dd></div> <div><dt class="text-sm font-medium text-gray-500">장소</dt> <dd class="mt-1 text-sm text-gray-900"> </dd></div></dl></div> <!> <div class="card"><h2 class="text-lg font-medium text-gray-900 mb-4"> </h2> <!></div></div>');function na(Rt,Dt){ge(Dt,!1);const pt=()=>ct(ze,"$page",q),e=()=>ct(mt,"$currentMeeting",q),Et=()=>ct(X,"$isLoading",q),[q,Ot]=Ce(),M=ot();let C=ot(""),A=ot(!1);_e(()=>{ft()});async function ft(){X.set(!0),k(C,""),k(A,!1);const c=new AbortController,h=setTimeout(()=>c.abort(),1e4);try{const S=await dt.get(`/meetings/${t(M)}`);clearTimeout(h),mt.set(S)}catch(S){clearTimeout(h);const F=S;if(F.name==="AbortError"){k(C,"요청 시간이 초과되었습니다. 다시 시도해주세요."),X.set(!1);return}if(Le()||F.code==="NETWORK_ERROR")try{if(t(M)){const K=await je(parseInt(t(M)));K?(mt.set(K),k(A,!0),k(C,"오프라인 모드 (캐시된 데이터)")):k(C,"서버에 연결할 수 없고 캐시된 데이터도 없습니다")}}catch{k(C,"회의 데이터를 불러올 수 없습니다")}else k(C,F.message||"회의 데이터 로드 실패")}finally{X.set(!1)}}async function Tt(){if(e())try{await dt.patch(`/meetings/${t(M)}`,{status:"in_progress"}),Bt(`/meetings/${t(M)}/record`)}catch(c){console.error("Failed to start meeting:",c)}}async function It(){if(confirm("이 회의를 삭제하시겠습니까?"))try{await dt.delete(`/meetings/${t(M)}`),Bt("/meetings")}catch(c){console.error("Failed to delete meeting:",c)}}function St(c){return c?new Date(c).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function Ft(c){switch(c){case"draft":return"bg-gray-100 text-gray-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function Kt(c){switch(c){case"draft":return"작성 중";case"in_progress":return"진행 중";case"completed":return"완료";default:return c}}function Vt(c){switch(c){case"pending":return"text-gray-400";case"in_progress":return"text-yellow-500";case"completed":return"text-green-500";default:return"text-gray-400"}}xe(()=>pt(),()=>{k(M,pt().params.id)}),ye(),fe();var ut=T();Me("1hfq6zj",c=>{be(()=>{we.title=`${e(),s(()=>{var h;return((h=e())==null?void 0:h.title)||"회의"})??""} - MAX Meeting`})});var Ht=I(ut);{var Nt=c=>{var h=Be();o(c,h)},Ut=c=>{var h=T(),S=I(h);{var F=R=>{var D=Ae(),V=r(D),G=r(V,!0);a(V);var H=v(V,2);H.__click=ft,a(D),y(()=>f(G,t(C))),o(R,D)},K=R=>{var D=T(),V=I(D);{var G=H=>{var J=Ge(),gt=r(J);{var Wt=i=>{var l=Re();o(i,l)};u(gt,i=>{t(A)&&i(Wt)})}var P=v(gt,2),_t=r(P),xt=v(r(_t),8),Xt=r(xt,!0);a(xt),a(_t),a(P);var Q=v(P,2),Y=r(Q),Z=r(Y),tt=r(Z),qt=r(tt,!0);a(tt);var et=v(tt,2),Gt=r(et,!0);a(et),a(Z);var Jt=v(Z,2);{var Pt=i=>{var l=De(),_=r(l,!0);a(l),y(()=>f(_,(e(),s(()=>e().meeting_type.name)))),o(i,l)};u(Jt,i=>{e(),s(()=>{var l;return(l=e().meeting_type)==null?void 0:l.name})&&i(Pt)})}a(Y);var yt=v(Y,2),ht=r(yt);{var Qt=i=>{var l=Ee();l.__click=Tt,y(()=>l.disabled=t(A)),o(i,l)},Yt=i=>{var l=T(),_=I(l);{var n=g=>{var m=Oe();y(()=>jt(m,"href",`/meetings/${t(M)??""}/record`)),o(g,m)},E=g=>{var m=T(),z=I(m);{var L=j=>{var B=Te();y(()=>jt(B,"href",`/meetings/${t(M)??""}/result`)),o(j,B)};u(z,j=>{e(),s(()=>e().status==="completed")&&j(L)},!0)}o(g,m)};u(_,g=>{e(),s(()=>e().status==="in_progress")?g(n):g(E,!1)},!0)}o(i,l)};u(ht,i=>{e(),s(()=>e().status==="draft")?i(Qt):i(Yt,!1)})}var bt=v(ht,2);bt.__click=It,a(yt),a(Q);var at=v(Q,2),wt=v(r(at),2),rt=r(wt),Mt=v(r(rt),2),Zt=r(Mt,!0);a(Mt),a(rt);var $t=v(rt,2),kt=v(r($t),2),te=r(kt,!0);a(kt),a($t),a(wt),a(at);var Ct=v(at,2);{var ee=i=>{var l=Fe(),_=r(l),n=r(_);a(_);var E=v(_,2);nt(E,5,()=>(e(),s(()=>e().attendees)),g=>g.id,(g,m)=>{var z=Se(),L=r(z),j=v(L);{var B=b=>{var $=Ie(),N=r($);a($),y(()=>f(N,`(${t(m),s(()=>t(m).contact.role)??""})`)),o(b,$)};u(j,b=>{t(m),s(()=>{var $;return($=t(m).contact)==null?void 0:$.role})&&b(B)})}a(z),y(()=>f(L,`${t(m),s(()=>{var b;return((b=t(m).contact)==null?void 0:b.name)||"(알 수 없음)"})??""} `)),o(g,z)}),a(E),a(l),y(()=>f(n,`참석자 (${e(),s(()=>e().attendees.length)??""})`)),o(i,l)};u(Ct,i=>{e(),s(()=>e().attendees&&e().attendees.length>0)&&i(ee)})}var zt=v(Ct,2),st=r(zt),ae=r(st);a(st);var re=v(st,2);{var se=i=>{var l=Ke();o(i,l)},ie=i=>{var l=qe();nt(l,7,()=>(e(),s(()=>e().agendas)),_=>_.id,(_,n,E)=>{var g=Xe(),m=r(g),z=r(m),L=r(z),j=r(L,!0);a(L);var B=v(L,2),b=r(B),$=r(b),N=v($),le=r(N);{var oe=p=>{var x=Ve();o(p,x)},ne=p=>{var x=T(),O=I(x);{var U=w=>{var W=He();o(w,W)};u(O,w=>{t(n),s(()=>t(n).status==="in_progress")&&w(U)},!0)}o(p,x)};u(le,p=>{t(n),s(()=>t(n).status==="completed")?p(oe):p(ne,!1)})}a(N),a(b);var ve=v(b,2);{var ce=p=>{var x=Ne(),O=r(x,!0);a(x),y(()=>f(O,(t(n),s(()=>t(n).description)))),o(p,x)};u(ve,p=>{t(n),s(()=>t(n).description)&&p(ce)})}a(B),a(z),a(m);var de=v(m,2);{var me=p=>{var x=We(),O=v(r(x),2);nt(O,5,()=>(t(n),s(()=>t(n).questions)),U=>U.id,(U,w)=>{var W=Ue(),it=r(W);$e(it);var lt=v(it,2),pe=r(lt,!0);a(lt),a(W),y(()=>{ke(it,(t(w),s(()=>t(w).answered))),vt(lt,1,Lt((t(w),s(()=>t(w).answered?"text-gray-400 line-through":"text-gray-700")))),f(pe,(t(w),s(()=>t(w).question)))}),o(U,W)}),a(O),a(x),o(p,x)};u(de,p=>{t(n),s(()=>t(n).questions&&t(n).questions.length>0)&&p(me)})}a(g),y(p=>{f(j,t(E)+1),f($,`${t(n),s(()=>t(n).title)??""} `),vt(N,1,p)},[()=>Lt((t(n),s(()=>Vt(t(n).status))))]),o(_,g)}),a(l),o(i,l)};u(re,i=>{e(),s(()=>!e().agendas||e().agendas.length===0)?i(se):i(ie,!1)})}a(zt),a(J),y((i,l,_)=>{f(Xt,(e(),s(()=>e().title))),f(qt,(e(),s(()=>e().title))),vt(et,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i??""}`),f(Gt,l),bt.disabled=t(A),f(Zt,_),f(te,(e(),s(()=>e().location||"-"))),f(ae,`안건 (${e(),s(()=>{var n;return((n=e().agendas)==null?void 0:n.length)||0})??""})`)},[()=>(e(),s(()=>Ft(e().status))),()=>(e(),s(()=>Kt(e().status))),()=>(e(),s(()=>St(e().scheduled_at)))]),o(H,J)};u(V,H=>{e()&&H(G)},!0)}o(R,D)};u(S,R=>{t(C)&&!t(A)?R(F):R(K,!1)},!0)}o(c,h)};u(Ht,c=>{Et()?c(Nt):c(Ut,!1)})}o(Rt,ut),he(),Ot()}ue(["click"]);export{na as component};
