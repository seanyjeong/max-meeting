import"../chunks/CWj6FrbW.js";import{p as re,o as se,aF as ne,a as n,b as oe,v as ie,f,g as r,s as x,$ as de,d as l,r as v,w as I,l as le,n as b,C as ve,e as H,c as p,q as ce,k as X}from"../chunks/dEE0t6TH.js";import{i as A}from"../chunks/C3dn6ghA.js";import{h as me}from"../chunks/C-8mY6PU.js";import{s as ge,b as C,a as w}from"../chunks/IoHDDGUh.js";import{p as ue}from"../chunks/cT6OB_cF.js";import{g as L}from"../chunks/DzGFvkG0.js";import{a as j,B as z,b as pe}from"../chunks/DKX1Bax4.js";import{B as fe}from"../chunks/1ZOD2yLP.js";import{L as he}from"../chunks/6EBku0UH.js";import"../chunks/BNjbk8Ua.js";import{i as D,c as P}from"../chunks/BEFWedIY.js";import{a as _e}from"../chunks/nFeSIjG2.js";var $e=f('<div class="loading-container svelte-14v2eyu"><!> <p>회의 로딩 중...</p></div>'),ke=f('<span class="unsaved-indicator svelte-14v2eyu">저장되지 않은 변경사항</span>'),ye=X('<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path></svg> 저장',1),be=X('<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> 뒤로',1),we=f('<header class="page-header svelte-14v2eyu"><div class="header-left svelte-14v2eyu"><!></div> <div class="header-actions svelte-14v2eyu"><!> <!> <!></div></header> <main class="sketch-content svelte-14v2eyu"><!></main>',1),Me=f('<div class="error-container svelte-14v2eyu"><p>회의를 찾을 수 없습니다</p> <!></div>'),Se=f('<div class="sketch-page svelte-14v2eyu"><!></div>');function Pe(E,G){re(G,!0);const J=()=>w(ue,"$page",h),s=()=>w(P,"$currentMeeting",h),K=()=>w(D,"$isLoading",h),N=()=>w(j,"$sketchStore",h),[h,O]=ge();let o=I(()=>parseInt(J().params.id??"0")),_=le(null),Q=I(()=>{var e;return[{label:"홈",href:"/"},{label:"회의",href:"/meetings"},{label:((e=s())==null?void 0:e.title)||"회의",href:`/meetings/${r(o)}`},{label:"스케치"}]});se(async()=>{var e,a;if(!s()||s().id!==r(o)){C(D,!0);try{const t=await _e.get(`/meetings/${r(o)}`);C(P,t);const i=(e=t.agendas)==null?void 0:e.find($=>$.status==="in_progress"||$.status==="pending");i&&x(_,i.id,!0)}catch(t){console.error("Failed to load meeting:",t),L("/meetings")}finally{C(D,!1)}}else if(((a=s().agendas)==null?void 0:a.length)>0){const t=s().agendas.find(i=>i.status==="in_progress"||i.status==="pending");x(_,(t==null?void 0:t.id)??s().agendas[0].id,!0)}}),ne(()=>{j.saveSketch(r(o))});function R(e){x(_,e,!0)}async function T(){await j.saveSketch(r(o))}function U(){L(`/meetings/${r(o)}`)}var M=Se();me("14v2eyu",e=>{ie(()=>{var a;de.title=`스케치 - ${(((a=s())==null?void 0:a.title)||"회의")??""} | MAX Meeting`})});var W=l(M);{var Y=e=>{var a=$e(),t=l(a);he(t,{}),b(2),v(a),n(e,a)},Z=e=>{var a=ve(),t=H(a);{var i=c=>{var m=we(),g=H(m),k=l(g),S=l(k);fe(S,{get items(){return r(Q)}}),v(k);var y=p(k,2),F=l(y);{var ee=d=>{var u=ke();n(d,u)};A(F,d=>{N().isDirty&&d(ee)})}var V=p(F,2);z(V,{variant:"secondary",size:"sm",onclick:T,children:u=>{var B=ye();b(),n(u,B)},$$slots:{default:!0}});var ae=p(V,2);z(ae,{variant:"secondary",size:"sm",onclick:U,children:u=>{var B=be();b(),n(u,B)},$$slots:{default:!0}}),v(y),v(g);var q=p(g,2),te=l(q);{let d=I(()=>s().agendas||[]);pe(te,{get meetingId(){return r(o)},get agendas(){return r(d)},get currentAgendaId(){return r(_)},onAgendaChange:R})}v(q),n(c,m)},$=c=>{var m=Me(),g=p(l(m),2);z(g,{variant:"primary",onclick:()=>L("/meetings"),children:S=>{b();var y=ce("회의 목록으로");n(S,y)},$$slots:{default:!0}}),v(m),n(c,m)};A(t,c=>{s()?c(i):c($,!1)},!0)}n(e,a)};A(W,e=>{K()?e(Y):e(Z,!1)})}v(M),n(E,M),oe(),O()}export{Pe as component};
