import"../chunks/CWj6FrbW.js";import{p as fe,o as he,aD as ge,s as R,g as a,x as _e,a as r,b as $e,l as G,aE as ze,v as be,f as u,$ as ke,d as n,r as i,w as J,n as $,C as Se,e as w,c as d,q as K,k as ye}from"../chunks/dEE0t6TH.js";import{i as E}from"../chunks/C3dn6ghA.js";import{h as we}from"../chunks/C-8mY6PU.js";import{a as z,s as Ce,b as T}from"../chunks/IoHDDGUh.js";import{p as Me}from"../chunks/cT6OB_cF.js";import{g as C}from"../chunks/DzGFvkG0.js";import{B as xe}from"../chunks/1ZOD2yLP.js";import{r as c,h as Be,B as A,A as Le,S as Ie,T as Re}from"../chunks/DKX1Bax4.js";import{C as N}from"../chunks/B1arvRME.js";import{L as Ee}from"../chunks/6EBku0UH.js";import"../chunks/BNjbk8Ua.js";import{i as V,c as O}from"../chunks/BEFWedIY.js";import{a as Te}from"../chunks/nFeSIjG2.js";var Ae=u('<div class="loading-container svelte-1esumzv"><!> <p>결과 로딩 중...</p></div>'),Ve=u('<div class="error-container svelte-1esumzv"><p>수정할 결과가 없습니다. 먼저 결과를 생성하세요.</p> <!></div>'),De=u('<span class="unsaved-indicator svelte-1esumzv">저장되지 않은 변경사항</span>'),Ue=ye('<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path></svg> 저장',1),je=u('<div class="panel-header svelte-1esumzv"><h2 class="svelte-1esumzv">요약 편집기</h2> <span class="hint svelte-1esumzv">마크다운으로 서식 지정</span></div> <!>',1),qe=u('<div class="panel-header padded svelte-1esumzv"><h2 class="svelte-1esumzv">원본 전사록</h2> <span class="hint svelte-1esumzv">클릭하여 타임스탬프 삽입</span></div> <!>',1),Fe=u('<header class="page-header svelte-1esumzv"><div class="header-left svelte-1esumzv"><!></div> <div class="header-actions svelte-1esumzv"><!> <!> <!></div></header> <main class="edit-content svelte-1esumzv"><div class="editor-panel svelte-1esumzv"><!> <div class="action-items-section svelte-1esumzv"><!></div></div> <div class="transcript-panel svelte-1esumzv"><!></div></main> <aside class="shortcuts-help svelte-1esumzv" aria-label="키보드 단축키"><span class="shortcut svelte-1esumzv"><kbd class="svelte-1esumzv">Cmd</kbd>+<kbd class="svelte-1esumzv">S</kbd> 저장</span> <span class="shortcut svelte-1esumzv"><kbd class="svelte-1esumzv">Cmd</kbd>+<kbd class="svelte-1esumzv">B</kbd> 굵게</span> <span class="shortcut svelte-1esumzv"><kbd class="svelte-1esumzv">Cmd</kbd>+<kbd class="svelte-1esumzv">I</kbd> 기울임</span></aside>',1),He=u('<div class="edit-page svelte-1esumzv"><!></div>');function ts(P,Q){fe(Q,!0);const W=()=>z(Me,"$page",g),b=()=>z(O,"$currentMeeting",g),Y=()=>z(V,"$isLoading",g),D=()=>z(Be,"$hasResult",g),p=()=>z(c,"$resultsStore",g),[g,Z]=Ce();let t=J(()=>parseInt(W().params.id??"0")),k=G(!1),M=G(""),ee=J(()=>{var e;return[{label:"홈",href:"/"},{label:"회의",href:"/meetings"},{label:((e=b())==null?void 0:e.title)||"회의",href:`/meetings/${a(t)}`},{label:"결과",href:`/meetings/${a(t)}/results`},{label:"수정"}]});he(async()=>{var e;if(!b()||b().id!==a(t)){T(V,!0);try{const s=await Te.get(`/meetings/${a(t)}`);T(O,s)}catch(s){console.error("Failed to load meeting:",s),C("/meetings");return}finally{T(V,!1)}}D()||(await c.loadResult(a(t)),await c.loadTranscript(a(t))),R(M,((e=p().currentResult)==null?void 0:e.summary)||"",!0),c.setEditMode(!0)}),ge(()=>{R(k,p().editedSummary!==a(M))});function se(e){if(a(k))return e.preventDefault(),""}async function ae(){await c.saveResult(a(t)),R(M,p().editedSummary,!0),C(`/meetings/${a(t)}/results`)}function te(){a(k)&&!confirm("저장되지 않은 변경사항이 있습니다. 나가시겠습니까?")||(c.setEditMode(!1),C(`/meetings/${a(t)}/results`))}function re(e){const v=`[${ne(e.start)}] `;c.setEditedSummary(p().editedSummary+v)}function ne(e){const s=Math.floor(e/60),v=Math.floor(e%60);return`${s.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`}var x=He();_e("beforeunload",ze,se),we("1esumzv",e=>{be(()=>{var s;ke.title=`결과 수정 - ${(((s=b())==null?void 0:s.title)||"회의")??""} | MAX Meeting`})});var ie=n(x);{var oe=e=>{var s=Ae(),v=n(s);Ee(v,{}),$(2),i(s),r(e,s)},le=e=>{var s=Se(),v=w(s);{var de=f=>{var h=Ve(),_=d(n(h),2);A(_,{variant:"primary",onclick:()=>C(`/meetings/${a(t)}/results`),children:B=>{$();var y=K("결과로 돌아가기");r(B,y)},$$slots:{default:!0}}),i(h),r(f,h)},ve=f=>{var h=Fe(),_=w(h),S=n(_),B=n(S);xe(B,{get items(){return a(ee)}}),i(S);var y=d(S,2),U=n(y);{var me=m=>{var o=De();r(m,o)};E(U,m=>{a(k)&&m(me)})}var j=d(U,2);A(j,{variant:"secondary",size:"sm",onclick:te,children:o=>{$();var l=K("취소");r(o,l)},$$slots:{default:!0}});var ce=d(j,2);A(ce,{variant:"primary",size:"sm",onclick:ae,get loading(){return p().isLoading},children:o=>{var l=Ue();$(),r(o,l)},$$slots:{default:!0}}),i(y),i(_);var q=d(_,2),L=n(q),F=n(L);N(F,{children:o=>{var l=je(),I=d(w(l),2);Ie(I,{}),r(o,l)},$$slots:{default:!0}});var H=d(F,2),ue=n(H);Le(ue,{get meetingId(){return a(t)}}),i(H),i(L);var X=d(L,2),pe=n(X);N(pe,{padding:!1,children:o=>{var l=qe(),I=d(w(l),2);Re(I,{onSegmentClick:re}),r(o,l)},$$slots:{default:!0}}),i(X),i(q),$(2),r(f,h)};E(v,f=>{D()?f(ve,!1):f(de)},!0)}r(e,s)};E(ie,e=>{Y()||p().isLoading?e(oe):e(le,!1)})}i(x),r(P,x),$e(),Z()}export{ts as component};
