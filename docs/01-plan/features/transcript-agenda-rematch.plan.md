# Transcript-Agenda Rematch 기능

> **요약**: LLM 기반으로 대화 내용을 분석하여 잘못 매칭된 안건을 제안/수정하는 기능
>
> **날짜**: 2026-01-31
> **상태**: 아이디어 단계

---

## 1. 문제

현재 타임스탬프 기반 매칭의 한계:

```
[안건1 클릭] → 대화 녹음 중...
"안건3에 대해서 말씀드리자면..." ← 실제론 안건3 내용
→ 타임스탬프 기반으로 안건1에 매칭됨 ❌
```

안건을 바꾸지 않고 다른 안건에 대해 대화하면 잘못 매칭됨.

---

## 2. 해결 방안

**B안: LLM 제안 후 사용자 확인**

1. 회의록 생성 시 (또는 별도 검수 단계)
2. LLM이 각 세그먼트 텍스트 분석
3. "이 대화는 어느 안건과 가장 관련있는가?" 판단
4. 불일치 발견 시 → UI에 제안 표시
5. 사용자가 클릭 한번으로 이동 승인

---

## 3. 구현 방향

### 3.1 백엔드

- LLM 분석 시 각 세그먼트-안건 관련도 계산
- 불일치 감지 시 `suggested_agenda_id` 필드 추가
- 사용자 승인 API: `PATCH /segments/{id}/move`

### 3.2 프론트엔드

- 대화내용 탭에서 불일치 세그먼트 하이라이트
- "이 대화는 [안건3]에 해당하는 것 같습니다. 이동할까요?" 토스트
- 클릭 시 즉시 이동

### 3.3 고려사항

| 항목 | 내용 |
|------|------|
| LLM 비용 | 세그먼트별 분석 → 토큰 증가 |
| 정확도 | 짧은 세그먼트는 판단 어려움 |
| UX | 너무 많은 제안은 피로감 유발 |

---

## 4. 우선순위

- [ ] 먼저 현재 수정 (재귀 필터링) 테스트
- [ ] 테스트 후 이 기능 구현 여부 결정
